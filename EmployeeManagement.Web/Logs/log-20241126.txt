2024-11-26T11:11:20.6132727+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T11:11:20.8458780+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T11:11:20.8460147+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T11:11:20.8770122+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T11:11:20.8774405+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T11:11:20.8774903+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T11:11:21.7305476+01:00 0HN8E0AMH0NT4:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T11:11:21.9067065+01:00 0HN8E0AMH0NT4:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 181.7273ms (74253ad3)
2024-11-26T11:11:21.9088622+01:00 0HN8E0AMH0NT4:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T11:11:24.8561428+01:00 0HN8E0AMH0NT4:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:11:24.8614212+01:00 0HN8E0AMH0NT4:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:24.8716685+01:00 0HN8E0AMH0NT4:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:24.9744761+01:00 0HN8E0AMH0NT4:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:11:24.9983458+01:00 0HN8E0AMH0NT4:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 23.7781ms. (f66409e9)
2024-11-26T11:11:24.9991648+01:00 0HN8E0AMH0NT4:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 127.0394ms (afa2e885)
2024-11-26T11:11:24.9992767+01:00 0HN8E0AMH0NT4:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:25.0020926+01:00 0HN8E0AMH0NT4:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 145.9212ms (74253ad3)
2024-11-26T11:11:25.0276943+01:00 0HN8E0AMH0NT4:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:11:25.0289873+01:00 0HN8E0AMH0NT4:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:11:25.0289887+01:00 0HN8E0AMH0NT4:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/css/Acceuil.css""" - null null (d509f86a)
2024-11-26T11:11:25.0289923+01:00 0HN8E0AMH0NT4:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/images/HCP1.jpeg""" - null null (d509f86a)
2024-11-26T11:11:25.0352129+01:00 0HN8E0AMH0NT4:00000007 [INF] The file "/css/Acceuil.css" was not modified (f1f8d725)
2024-11-26T11:11:25.0366608+01:00 0HN8E0AMH0NT4:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/css/Acceuil.css""" - 304 null "text/css" 7.3812ms (74253ad3)
2024-11-26T11:11:25.0478860+01:00 0HN8E0AMH0NT4:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 20.5272ms (74253ad3)
2024-11-26T11:11:25.0565330+01:00 0HN8E0AMH0NT4:00000009 [INF] Sending file. Request path: '"/images/HCP1.jpeg"'. Physical path: '"C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\wwwroot\images\HCP1.jpeg"' (27b0a520)
2024-11-26T11:11:25.0574603+01:00 0HN8E0AMH0NT4:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/images/HCP1.jpeg""" - 200 13452 "image/jpeg" 28.6902ms (74253ad3)
2024-11-26T11:11:25.0883071+01:00 0HN8E0AMH0NT4:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 59.5538ms (74253ad3)
2024-11-26T11:11:29.8248223+01:00 0HN8E0AMH0NT4:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:11:29.8310943+01:00 0HN8E0AMH0NT4:0000000D [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:29.8325036+01:00 0HN8E0AMH0NT4:0000000D [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:29.8385056+01:00 0HN8E0AMH0NT4:0000000D [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:11:29.8430667+01:00 0HN8E0AMH0NT4:0000000D [INF] Executed ViewResult - view "Login" executed in 5.0775ms. (f66409e9)
2024-11-26T11:11:29.8431976+01:00 0HN8E0AMH0NT4:0000000D [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 10.6531ms (afa2e885)
2024-11-26T11:11:29.8432255+01:00 0HN8E0AMH0NT4:0000000D [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:29.8433696+01:00 0HN8E0AMH0NT4:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 18.706ms (74253ad3)
2024-11-26T11:11:29.8670561+01:00 0HN8E0AMH0NT4:0000000F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/css/Login.css""" - null null (d509f86a)
2024-11-26T11:11:29.8675837+01:00 0HN8E0AMH0NT4:0000000F [INF] The file "/css/Login.css" was not modified (f1f8d725)
2024-11-26T11:11:29.8678010+01:00 0HN8E0AMH0NT4:0000000F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/css/Login.css""" - 304 null "text/css" 1.0772ms (74253ad3)
2024-11-26T11:11:29.8683213+01:00 0HN8E0AMH0NT4:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:11:29.8693858+01:00 0HN8E0AMH0NT4:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.1255ms (74253ad3)
2024-11-26T11:11:29.8693859+01:00 0HN8E0AMH0NT4:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:11:29.8765121+01:00 0HN8E0AMH0NT4:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 7.2647ms (74253ad3)
2024-11-26T11:11:31.1924179+01:00 0HN8E0AMH0NT4:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T11:11:31.1968134+01:00 0HN8E0AMH0NT4:00000015 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:31.2082770+01:00 0HN8E0AMH0NT4:00000015 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:32.0012976+01:00 0HN8E0AMH0NT4:00000015 [INF] Executed DbCommand ("43"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:11:32.0641132+01:00 0HN8E0AMH0NT4:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:11:32.0678102+01:00 0HN8E0AMH0NT4:00000015 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:11:32.0766595+01:00 0HN8E0AMH0NT4:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:11:32.0771492+01:00 0HN8E0AMH0NT4:00000015 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 868.8129ms (afa2e885)
2024-11-26T11:11:32.0773196+01:00 0HN8E0AMH0NT4:00000015 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:32.0816929+01:00 0HN8E0AMH0NT4:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:11:32.0819438+01:00 0HN8E0AMH0NT4:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 889.6674ms (74253ad3)
2024-11-26T11:11:32.0868466+01:00 0HN8E0AMH0NT4:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:32.0890026+01:00 0HN8E0AMH0NT4:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:32.1711998+01:00 0HN8E0AMH0NT4:00000017 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T11:11:32.2011236+01:00 0HN8E0AMH0NT4:00000017 [INF] Executed DbCommand ("18"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:11:32.2913935+01:00 0HN8E0AMH0NT4:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:11:32.2942107+01:00 0HN8E0AMH0NT4:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.1003ms. (f66409e9)
2024-11-26T11:11:32.2942851+01:00 0HN8E0AMH0NT4:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 205.2387ms (afa2e885)
2024-11-26T11:11:32.2943063+01:00 0HN8E0AMH0NT4:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:32.2945933+01:00 0HN8E0AMH0NT4:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:11:32.2947442+01:00 0HN8E0AMH0NT4:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:11:32.2948738+01:00 0HN8E0AMH0NT4:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 213.4542ms (74253ad3)
2024-11-26T11:11:32.3077801+01:00 0HN8E0AMH0NT4:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/css/DemandesListRequester.css""" - null null (d509f86a)
2024-11-26T11:11:32.3081693+01:00 0HN8E0AMH0NT4:00000019 [INF] The file "/css/DemandesListRequester.css" was not modified (f1f8d725)
2024-11-26T11:11:32.3082937+01:00 0HN8E0AMH0NT4:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/css/DemandesListRequester.css""" - 304 null "text/css" 0.9082ms (74253ad3)
2024-11-26T11:11:37.6260449+01:00 0HN8E0AMH0NT4:0000001B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Register""" - null null (d509f86a)
2024-11-26T11:11:37.6286864+01:00 0HN8E0AMH0NT4:0000001B [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:37.6313308+01:00 0HN8E0AMH0NT4:0000001B [INF] Route matched with "{action = \"Register\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Register()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:37.6895710+01:00 0HN8E0AMH0NT4:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Id], [r].[CreatedBy], [r].[CreatedDate], [r].[IsDeleted], [r].[ModifiedBy], [r].[ModifiedDate], [r].[Name]
FROM [Roles] AS [r]" (0723d8ff)
2024-11-26T11:11:37.7120897+01:00 0HN8E0AMH0NT4:0000001B [INF] Executing ViewResult, running view "Register". (c83d0e25)
2024-11-26T11:11:37.7290734+01:00 0HN8E0AMH0NT4:0000001B [INF] Executed ViewResult - view "Register" executed in 17.2917ms. (f66409e9)
2024-11-26T11:11:37.7291251+01:00 0HN8E0AMH0NT4:0000001B [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)" in 97.7465ms (afa2e885)
2024-11-26T11:11:37.7291451+01:00 0HN8E0AMH0NT4:0000001B [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:37.7291912+01:00 0HN8E0AMH0NT4:0000001B [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:11:37.7292136+01:00 0HN8E0AMH0NT4:0000001B [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:11:37.7293198+01:00 0HN8E0AMH0NT4:0000001B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Register""" - 200 null "text/html; charset=utf-8" 103.5738ms (74253ad3)
2024-11-26T11:11:37.7453289+01:00 0HN8E0AMH0NT4:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/css/Register.css""" - null null (d509f86a)
2024-11-26T11:11:37.7571279+01:00 0HN8E0AMH0NT4:0000001D [INF] Sending file. Request path: '"/css/Register.css"'. Physical path: '"C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\wwwroot\css\Register.css"' (27b0a520)
2024-11-26T11:11:37.7572924+01:00 0HN8E0AMH0NT4:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/css/Register.css""" - 200 1784 "text/css" 12.1255ms (74253ad3)
2024-11-26T11:11:54.5175189+01:00 0HN8E0AMH0NT4:0000001F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/register""" - "application/x-www-form-urlencoded" 65 (d509f86a)
2024-11-26T11:11:54.5204057+01:00 0HN8E0AMH0NT4:0000001F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:54.5255587+01:00 0HN8E0AMH0NT4:0000001F [INF] Route matched with "{action = \"Register\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(StockManagement.Application.Features.Models.Commands.RegisterCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:54.5374758+01:00 0HN8E0AMH0NT4:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:11:54.6027739+01:00 0HN8E0AMH0NT4:0000001F [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [CreatedBy], [CreatedDate], [IsDeleted], [ModifiedBy], [ModifiedDate], [PasswordHash], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);" (0723d8ff)
2024-11-26T11:11:54.6094070+01:00 0HN8E0AMH0NT4:0000001F [INF] Executing RedirectResult, redirecting to "/api/Employees". (d98d540e)
2024-11-26T11:11:54.6094982+01:00 0HN8E0AMH0NT4:0000001F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)" in 83.8705ms (afa2e885)
2024-11-26T11:11:54.6095165+01:00 0HN8E0AMH0NT4:0000001F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Register (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:54.6096638+01:00 0HN8E0AMH0NT4:0000001F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/register""" - 302 0 null 92.2357ms (74253ad3)
2024-11-26T11:11:54.6123644+01:00 0HN8E0AMH0NT4:00000021 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:11:54.6136360+01:00 0HN8E0AMH0NT4:00000021 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:54.6137817+01:00 0HN8E0AMH0NT4:00000021 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:54.6141607+01:00 0HN8E0AMH0NT4:00000021 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:11:54.6151792+01:00 0HN8E0AMH0NT4:00000021 [INF] Executed ViewResult - view "Acceuil" executed in 1.1786ms. (f66409e9)
2024-11-26T11:11:54.6152210+01:00 0HN8E0AMH0NT4:00000021 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 1.4111ms (afa2e885)
2024-11-26T11:11:54.6152383+01:00 0HN8E0AMH0NT4:00000021 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:54.6153191+01:00 0HN8E0AMH0NT4:00000021 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 3.193ms (74253ad3)
2024-11-26T11:11:54.6458348+01:00 0HN8E0AMH0NT4:00000023 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:11:54.6459186+01:00 0HN8E0AMH0NT4:00000025 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:11:54.6464294+01:00 0HN8E0AMH0NT4:00000023 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.8055ms (74253ad3)
2024-11-26T11:11:54.6525802+01:00 0HN8E0AMH0NT4:00000025 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 6.8911ms (74253ad3)
2024-11-26T11:11:58.1305354+01:00 0HN8E0AMH0NT4:00000027 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:11:58.1322049+01:00 0HN8E0AMH0NT4:00000027 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:11:58.1323095+01:00 0HN8E0AMH0NT4:00000027 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:11:58.1326453+01:00 0HN8E0AMH0NT4:00000027 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:11:58.1334226+01:00 0HN8E0AMH0NT4:00000027 [INF] Executed ViewResult - view "Login" executed in 0.8051ms. (f66409e9)
2024-11-26T11:11:58.1334927+01:00 0HN8E0AMH0NT4:00000027 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 1.1391ms (afa2e885)
2024-11-26T11:11:58.1335213+01:00 0HN8E0AMH0NT4:00000027 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:11:58.1336316+01:00 0HN8E0AMH0NT4:00000027 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 3.2283ms (74253ad3)
2024-11-26T11:11:58.1622922+01:00 0HN8E0AMH0NT4:00000029 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:11:58.1648904+01:00 0HN8E0AMH0NT4:0000002B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:11:58.1661080+01:00 0HN8E0AMH0NT4:0000002B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.3907ms (74253ad3)
2024-11-26T11:11:58.1713084+01:00 0HN8E0AMH0NT4:00000029 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 9.4227ms (74253ad3)
2024-11-26T11:12:07.2259247+01:00 0HN8E0AMH0NT4:0000002D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:12:07.2275749+01:00 0HN8E0AMH0NT4:0000002D [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:12:07.2276834+01:00 0HN8E0AMH0NT4:0000002D [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:12:07.2339856+01:00 0HN8E0AMH0NT4:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:12:07.2389286+01:00 0HN8E0AMH0NT4:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:12:07.2402414+01:00 0HN8E0AMH0NT4:0000002D [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:12:07.2404970+01:00 0HN8E0AMH0NT4:0000002D [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:12:07.2405954+01:00 0HN8E0AMH0NT4:0000002D [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 12.8709ms (afa2e885)
2024-11-26T11:12:07.2406269+01:00 0HN8E0AMH0NT4:0000002D [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:12:07.2407836+01:00 0HN8E0AMH0NT4:0000002D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 15.4093ms (74253ad3)
2024-11-26T11:12:07.2436829+01:00 0HN8E0AMH0NT4:0000002F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:12:07.2491885+01:00 0HN8E0AMH0NT4:0000002F [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:12:07.2494626+01:00 0HN8E0AMH0NT4:0000002F [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:12:07.2546995+01:00 0HN8E0AMH0NT4:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:12:07.2599213+01:00 0HN8E0AMH0NT4:0000002F [INF] Executing "NotFoundObjectResult", writing value of type '"System.String"'. (605b4265)
2024-11-26T11:12:07.2608254+01:00 0HN8E0AMH0NT4:0000002F [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 11.2654ms (afa2e885)
2024-11-26T11:12:07.2608597+01:00 0HN8E0AMH0NT4:0000002F [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:12:07.2610126+01:00 0HN8E0AMH0NT4:0000002F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 404 null "text/plain; charset=utf-8" 17.4915ms (74253ad3)
2024-11-26T11:13:01.3584036+01:00 0HN8E0AMH0NT4:00000031 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:13:01.3630204+01:00 0HN8E0AMH0NT4:00000031 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 3.1559ms (74253ad3)
2024-11-26T11:13:06.8724881+01:00 0HN8E0AMH0NT4:00000033 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:13:06.8743285+01:00 0HN8E0AMH0NT4:00000033 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:06.8744459+01:00 0HN8E0AMH0NT4:00000033 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:06.8838329+01:00 0HN8E0AMH0NT4:00000033 [INF] Executed DbCommand ("6"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:13:06.8868413+01:00 0HN8E0AMH0NT4:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:13:06.8871356+01:00 0HN8E0AMH0NT4:00000033 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:13:06.8872549+01:00 0HN8E0AMH0NT4:00000033 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:13:06.8873002+01:00 0HN8E0AMH0NT4:00000033 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 12.8216ms (afa2e885)
2024-11-26T11:13:06.8873153+01:00 0HN8E0AMH0NT4:00000033 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:06.8874521+01:00 0HN8E0AMH0NT4:00000033 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 15.1736ms (74253ad3)
2024-11-26T11:13:06.8901488+01:00 0HN8E0AMH0NT4:00000035 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:13:06.8931778+01:00 0HN8E0AMH0NT4:00000035 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:06.8932896+01:00 0HN8E0AMH0NT4:00000035 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:06.9212521+01:00 0HN8E0AMH0NT4:00000035 [INF] Executed DbCommand ("26"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:13:06.9216153+01:00 0HN8E0AMH0NT4:00000035 [INF] Executing "NotFoundObjectResult", writing value of type '"System.String"'. (605b4265)
2024-11-26T11:13:06.9217501+01:00 0HN8E0AMH0NT4:00000035 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 28.4149ms (afa2e885)
2024-11-26T11:13:06.9217723+01:00 0HN8E0AMH0NT4:00000035 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:06.9218810+01:00 0HN8E0AMH0NT4:00000035 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 404 null "text/plain; charset=utf-8" 31.8925ms (74253ad3)
2024-11-26T11:13:27.7076791+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T11:13:27.9104812+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T11:13:27.9106129+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T11:13:27.9374148+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T11:13:27.9377003+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T11:13:27.9377202+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T11:13:28.3651402+01:00 0HN8E0BSARLDP:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T11:13:28.4795635+01:00 0HN8E0BSARLDP:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 117.5963ms (74253ad3)
2024-11-26T11:13:28.4808769+01:00 0HN8E0BSARLDP:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T11:13:32.0129962+01:00 0HN8E0BSARLDP:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:13:32.0213495+01:00 0HN8E0BSARLDP:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:32.0348732+01:00 0HN8E0BSARLDP:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:32.1331395+01:00 0HN8E0BSARLDP:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:13:32.1546909+01:00 0HN8E0BSARLDP:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 22.6743ms. (f66409e9)
2024-11-26T11:13:32.1553146+01:00 0HN8E0BSARLDP:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 120.0511ms (afa2e885)
2024-11-26T11:13:32.1554127+01:00 0HN8E0BSARLDP:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:32.1577449+01:00 0HN8E0BSARLDP:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 145.2549ms (74253ad3)
2024-11-26T11:13:32.1888228+01:00 0HN8E0BSARLDP:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:13:32.1905213+01:00 0HN8E0BSARLDP:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:13:32.2019722+01:00 0HN8E0BSARLDP:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 13.4096ms (74253ad3)
2024-11-26T11:13:32.2238571+01:00 0HN8E0BSARLDP:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 33.8562ms (74253ad3)
2024-11-26T11:13:33.3816816+01:00 0HN8E0BSARLDP:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:13:33.3883296+01:00 0HN8E0BSARLDP:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:33.3898745+01:00 0HN8E0BSARLDP:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:33.3953336+01:00 0HN8E0BSARLDP:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:13:33.4021531+01:00 0HN8E0BSARLDP:00000009 [INF] Executed ViewResult - view "Login" executed in 7.5467ms. (f66409e9)
2024-11-26T11:13:33.4023884+01:00 0HN8E0BSARLDP:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 12.4428ms (afa2e885)
2024-11-26T11:13:33.4024432+01:00 0HN8E0BSARLDP:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:33.4026630+01:00 0HN8E0BSARLDP:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 21.217ms (74253ad3)
2024-11-26T11:13:33.4296957+01:00 0HN8E0BSARLDP:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:13:33.4301936+01:00 0HN8E0BSARLDP:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:13:33.4316293+01:00 0HN8E0BSARLDP:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.3876ms (74253ad3)
2024-11-26T11:13:33.4486929+01:00 0HN8E0BSARLDP:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 19.2209ms (74253ad3)
2024-11-26T11:13:40.4135043+01:00 0HN8E0BSARLDP:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:13:40.4168822+01:00 0HN8E0BSARLDP:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:40.4292354+01:00 0HN8E0BSARLDP:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:41.2701312+01:00 0HN8E0BSARLDP:0000000F [INF] Executed DbCommand ("35"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:13:41.3318966+01:00 0HN8E0BSARLDP:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:13:41.3355757+01:00 0HN8E0BSARLDP:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:13:41.3439821+01:00 0HN8E0BSARLDP:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:13:41.3444338+01:00 0HN8E0BSARLDP:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 915.0996ms (afa2e885)
2024-11-26T11:13:41.3445957+01:00 0HN8E0BSARLDP:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:41.3476846+01:00 0HN8E0BSARLDP:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 934.5362ms (74253ad3)
2024-11-26T11:13:41.3481489+01:00 0HN8E0BSARLDP:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:13:41.3525291+01:00 0HN8E0BSARLDP:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:13:41.3545324+01:00 0HN8E0BSARLDP:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:13:41.4305311+01:00 0HN8E0BSARLDP:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T11:13:41.4564111+01:00 0HN8E0BSARLDP:00000011 [INF] Executed DbCommand ("15"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:13:41.4578017+01:00 0HN8E0BSARLDP:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:13:41.4607731+01:00 0HN8E0BSARLDP:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.32ms. (f66409e9)
2024-11-26T11:13:41.4608465+01:00 0HN8E0BSARLDP:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 106.2698ms (afa2e885)
2024-11-26T11:13:41.4608748+01:00 0HN8E0BSARLDP:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:13:41.4611971+01:00 0HN8E0BSARLDP:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:13:41.4613474+01:00 0HN8E0BSARLDP:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:13:41.4614956+01:00 0HN8E0BSARLDP:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 113.421ms (74253ad3)
2024-11-26T11:15:16.0619661+01:00 0HN8E0BSARLDP:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:15:16.0727341+01:00 0HN8E0BSARLDP:00000013 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:15:16.0728867+01:00 0HN8E0BSARLDP:00000013 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:15:16.1239311+01:00 0HN8E0BSARLDP:00000013 [INF] Executed DbCommand ("17"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:15:16.1243855+01:00 0HN8E0BSARLDP:00000013 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:15:16.1252320+01:00 0HN8E0BSARLDP:00000013 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.0458ms. (f66409e9)
2024-11-26T11:15:16.1252867+01:00 0HN8E0BSARLDP:00000013 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 52.3583ms (afa2e885)
2024-11-26T11:15:16.1253111+01:00 0HN8E0BSARLDP:00000013 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:15:16.1253584+01:00 0HN8E0BSARLDP:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:15:16.1253730+01:00 0HN8E0BSARLDP:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:15:16.1254656+01:00 0HN8E0BSARLDP:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 63.8274ms (74253ad3)
2024-11-26T11:15:16.1793446+01:00 0HN8E0BSARLDP:00000015 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/favicon.ico""" - null null (d509f86a)
2024-11-26T11:15:16.1840654+01:00 0HN8E0BSARLDP:00000015 [INF] The file "/favicon.ico" was not modified (f1f8d725)
2024-11-26T11:15:16.1846175+01:00 0HN8E0BSARLDP:00000015 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/favicon.ico""" - 304 null "image/x-icon" 5.5052ms (74253ad3)
2024-11-26T11:15:18.6557575+01:00 0HN8E0BSARLDP:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:15:18.6586005+01:00 0HN8E0BSARLDP:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:15:18.6587520+01:00 0HN8E0BSARLDP:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:15:18.6624123+01:00 0HN8E0BSARLDP:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:15:18.6627301+01:00 0HN8E0BSARLDP:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:15:18.6634390+01:00 0HN8E0BSARLDP:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.7468ms. (f66409e9)
2024-11-26T11:15:18.6635125+01:00 0HN8E0BSARLDP:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 4.6999ms (afa2e885)
2024-11-26T11:15:18.6635457+01:00 0HN8E0BSARLDP:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:15:18.6636039+01:00 0HN8E0BSARLDP:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:15:18.6636354+01:00 0HN8E0BSARLDP:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:15:18.6637736+01:00 0HN8E0BSARLDP:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 8.2795ms (74253ad3)
2024-11-26T11:15:23.6991824+01:00 0HN8E0BSARLDP:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:15:23.7015904+01:00 0HN8E0BSARLDP:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:15:23.7037479+01:00 0HN8E0BSARLDP:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:15:23.7182607+01:00 0HN8E0BSARLDP:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:15:23.7202210+01:00 0HN8E0BSARLDP:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:15:23.7234707+01:00 0HN8E0BSARLDP:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 3.6118ms. (f66409e9)
2024-11-26T11:15:23.7235247+01:00 0HN8E0BSARLDP:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 19.7203ms (afa2e885)
2024-11-26T11:15:23.7235826+01:00 0HN8E0BSARLDP:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:15:23.7236284+01:00 0HN8E0BSARLDP:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:15:23.7236550+01:00 0HN8E0BSARLDP:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:15:23.7238638+01:00 0HN8E0BSARLDP:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 25.0192ms (74253ad3)
2024-11-26T11:15:23.7382611+01:00 0HN8E0BSARLDP:0000001B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/css/CreateDemande.css""" - null null (d509f86a)
2024-11-26T11:15:23.7390147+01:00 0HN8E0BSARLDP:0000001B [INF] The file "/css/CreateDemande.css" was not modified (f1f8d725)
2024-11-26T11:15:23.7395195+01:00 0HN8E0BSARLDP:0000001B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/css/CreateDemande.css""" - 304 null "text/css" 1.4179ms (74253ad3)
2024-11-26T11:15:33.9127003+01:00 0HN8E0BSARLDP:0000001D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 551 (d509f86a)
2024-11-26T11:15:33.9160666+01:00 0HN8E0BSARLDP:0000001D [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:15:33.9210696+01:00 0HN8E0BSARLDP:0000001D [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:15:33.9536463+01:00 0HN8E0BSARLDP:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:15:33.9608201+01:00 0HN8E0BSARLDP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:15:34.0694060+01:00 0HN8E0BSARLDP:0000001D [ERR] Failed executing DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:15:34.0943206+01:00 0HN8E0BSARLDP:0000001D [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5e2ee365-4d42-43af-80a6-59aebad8345b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5e2ee365-4d42-43af-80a6-59aebad8345b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
2024-11-26T11:15:34.1519210+01:00 0HN8E0BSARLDP:0000001D [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 230.7801ms (afa2e885)
2024-11-26T11:15:34.1521153+01:00 0HN8E0BSARLDP:0000001D [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:15:34.1597868+01:00 0HN8E0BSARLDP:0000001D [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5e2ee365-4d42-43af-80a6-59aebad8345b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 78
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:15:34.2032986+01:00 0HN8E0BSARLDP:0000001D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 290.8788ms (74253ad3)
2024-11-26T11:15:34.2183856+01:00 0HN8E0BSARLDP:0000001F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:15:34.2229406+01:00 0HN8E0BSARLDP:00000021 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:15:34.2237978+01:00 0HN8E0BSARLDP:00000021 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.8072ms (74253ad3)
2024-11-26T11:15:34.2283671+01:00 0HN8E0BSARLDP:0000001F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 10.0663ms (74253ad3)
2024-11-26T11:15:54.7534923+01:00 0HN8E0BSARLDP:00000023 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:15:54.7553996+01:00 0HN8E0BSARLDP:00000023 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:15:54.7555007+01:00 0HN8E0BSARLDP:00000023 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:15:54.7804630+01:00 0HN8E0BSARLDP:00000023 [INF] Executed DbCommand ("24"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:15:54.7807537+01:00 0HN8E0BSARLDP:00000023 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:15:54.7809964+01:00 0HN8E0BSARLDP:00000023 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.2725ms. (f66409e9)
2024-11-26T11:15:54.7810381+01:00 0HN8E0BSARLDP:00000023 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 25.5055ms (afa2e885)
2024-11-26T11:15:54.7810577+01:00 0HN8E0BSARLDP:00000023 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:15:54.7811036+01:00 0HN8E0BSARLDP:00000023 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:15:54.7811186+01:00 0HN8E0BSARLDP:00000023 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:15:54.7812018+01:00 0HN8E0BSARLDP:00000023 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 27.9459ms (74253ad3)
2024-11-26T11:15:56.1328544+01:00 0HN8E0BSARLDP:00000025 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:15:56.1336606+01:00 0HN8E0BSARLDP:00000025 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.927ms (74253ad3)
2024-11-26T11:16:04.3554395+01:00 0HN8E0BSARLDP:00000027 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:16:04.3573801+01:00 0HN8E0BSARLDP:00000027 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:16:04.3575747+01:00 0HN8E0BSARLDP:00000027 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:16:04.3644018+01:00 0HN8E0BSARLDP:00000027 [INF] Executed DbCommand ("4"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:16:04.3680077+01:00 0HN8E0BSARLDP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:16:04.3686535+01:00 0HN8E0BSARLDP:00000027 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:16:04.3689640+01:00 0HN8E0BSARLDP:00000027 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:16:04.3690356+01:00 0HN8E0BSARLDP:00000027 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 11.4016ms (afa2e885)
2024-11-26T11:16:04.3690551+01:00 0HN8E0BSARLDP:00000027 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:16:04.3691717+01:00 0HN8E0BSARLDP:00000027 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 13.9491ms (74253ad3)
2024-11-26T11:16:04.3714473+01:00 0HN8E0BSARLDP:00000029 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:16:04.3728516+01:00 0HN8E0BSARLDP:00000029 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:16:04.3732414+01:00 0HN8E0BSARLDP:00000029 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:16:04.3765469+01:00 0HN8E0BSARLDP:00000029 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:16:04.3767954+01:00 0HN8E0BSARLDP:00000029 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:16:04.3770242+01:00 0HN8E0BSARLDP:00000029 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.2593ms. (f66409e9)
2024-11-26T11:16:04.3770692+01:00 0HN8E0BSARLDP:00000029 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 3.5693ms (afa2e885)
2024-11-26T11:16:04.3770901+01:00 0HN8E0BSARLDP:00000029 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:16:04.3771364+01:00 0HN8E0BSARLDP:00000029 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:16:04.3771517+01:00 0HN8E0BSARLDP:00000029 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:16:04.3772588+01:00 0HN8E0BSARLDP:00000029 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 5.9145ms (74253ad3)
2024-11-26T11:23:20.8268707+01:00 0HN8E0BSARLDQ:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:23:20.8328073+01:00 0HN8E0BSARLDQ:00000001 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:23:20.8329074+01:00 0HN8E0BSARLDQ:00000001 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:23:20.8417706+01:00 0HN8E0BSARLDQ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:23:20.8421075+01:00 0HN8E0BSARLDQ:00000001 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:23:20.8427679+01:00 0HN8E0BSARLDQ:00000001 [INF] Executed ViewResult - view "CreateDemande" executed in 0.7277ms. (f66409e9)
2024-11-26T11:23:20.8428280+01:00 0HN8E0BSARLDQ:00000001 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 9.8844ms (afa2e885)
2024-11-26T11:23:20.8428577+01:00 0HN8E0BSARLDQ:00000001 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:23:20.8429147+01:00 0HN8E0BSARLDQ:00000001 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:23:20.8429431+01:00 0HN8E0BSARLDQ:00000001 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:23:20.8430572+01:00 0HN8E0BSARLDQ:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 16.9837ms (74253ad3)
2024-11-26T11:23:27.8760950+01:00 0HN8E0BSARLDQ:00000003 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 552 (d509f86a)
2024-11-26T11:23:27.8776600+01:00 0HN8E0BSARLDQ:00000003 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:23:27.8777522+01:00 0HN8E0BSARLDQ:00000003 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:23:27.8824371+01:00 0HN8E0BSARLDQ:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:23:27.8845588+01:00 0HN8E0BSARLDQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:23:27.8937982+01:00 0HN8E0BSARLDQ:00000003 [ERR] Failed executing DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:23:27.8963826+01:00 0HN8E0BSARLDQ:00000003 [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
2024-11-26T11:23:27.9355678+01:00 0HN8E0BSARLDQ:00000003 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 57.729ms (afa2e885)
2024-11-26T11:23:27.9358353+01:00 0HN8E0BSARLDQ:00000003 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:23:27.9373619+01:00 0HN8E0BSARLDQ:00000003 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 78
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:23:27.9416153+01:00 0HN8E0BSARLDQ:00000003 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 65.5026ms (74253ad3)
2024-11-26T11:23:27.9651473+01:00 0HN8E0BSARLDQ:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:23:27.9651043+01:00 0HN8E0BSARLDQ:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:23:27.9656901+01:00 0HN8E0BSARLDQ:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.7342ms (74253ad3)
2024-11-26T11:23:27.9755927+01:00 0HN8E0BSARLDQ:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 10.7026ms (74253ad3)
2024-11-26T11:25:16.2254695+01:00 0HN8E0BSARLDQ:00000009 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 552 (d509f86a)
2024-11-26T11:25:16.2339023+01:00 0HN8E0BSARLDQ:00000009 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:25:16.2339999+01:00 0HN8E0BSARLDQ:00000009 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:25:38.0186339+01:00 0HN8E0BSARLDQ:00000009 [INF] Executed DbCommand ("17"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:25:42.7137193+01:00 0HN8E0BSARLDQ:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:26:51.9033887+01:00 0HN8E0BSARLDQ:00000009 [ERR] Failed executing DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:26:51.9058259+01:00 0HN8E0BSARLDQ:00000009 [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
2024-11-26T11:26:51.9930978+01:00 0HN8E0BSARLDQ:00000009 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 95758.6828ms (afa2e885)
2024-11-26T11:26:51.9933460+01:00 0HN8E0BSARLDQ:00000009 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:26:51.9953371+01:00 0HN8E0BSARLDQ:00000009 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6f6c4c79-0d95-425d-81be-827b7cfcc666
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:26:51.9997861+01:00 0HN8E0BSARLDQ:00000009 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 95774.6404ms (74253ad3)
2024-11-26T11:26:52.0835954+01:00 0HN8E0BSARLDQ:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:26:52.0858658+01:00 0HN8E0BSARLDQ:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:26:52.0906879+01:00 0HN8E0BSARLDQ:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 6.9858ms (74253ad3)
2024-11-26T11:26:52.1040765+01:00 0HN8E0BSARLDQ:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 20.4557ms (74253ad3)
2024-11-26T11:28:13.5906127+01:00 0HN8E0BSARLDQ:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 552 (d509f86a)
2024-11-26T11:28:13.5979126+01:00 0HN8E0BSARLDQ:0000000F [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:28:13.6057827+01:00 0HN8E0BSARLDQ:0000000F [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:30:52.2649241+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T11:30:52.4338738+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T11:30:52.4339928+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T11:30:52.4591295+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T11:30:52.4594911+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T11:30:52.4595302+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T11:30:53.0293994+01:00 0HN8E0LJLD5N5:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T11:30:53.1851005+01:00 0HN8E0LJLD5N5:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 160.0807ms (74253ad3)
2024-11-26T11:30:53.1861661+01:00 0HN8E0LJLD5N5:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T11:31:06.8874912+01:00 0HN8E0LJLD5N5:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:31:06.9037078+01:00 0HN8E0LJLD5N5:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:06.9157235+01:00 0HN8E0LJLD5N5:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:07.0297373+01:00 0HN8E0LJLD5N5:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:31:07.0520443+01:00 0HN8E0LJLD5N5:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 21.8285ms. (f66409e9)
2024-11-26T11:31:07.0527494+01:00 0HN8E0LJLD5N5:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 136.5591ms (afa2e885)
2024-11-26T11:31:07.0528488+01:00 0HN8E0LJLD5N5:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:07.0551950+01:00 0HN8E0LJLD5N5:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 168.7293ms (74253ad3)
2024-11-26T11:31:07.0877098+01:00 0HN8E0LJLD5N5:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:31:07.0882703+01:00 0HN8E0LJLD5N5:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:31:07.1003600+01:00 0HN8E0LJLD5N5:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 12.8434ms (74253ad3)
2024-11-26T11:31:07.1190665+01:00 0HN8E0LJLD5N5:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 30.9607ms (74253ad3)
2024-11-26T11:31:08.4949050+01:00 0HN8E0LJLD5N5:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:31:08.5027611+01:00 0HN8E0LJLD5N5:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:08.5047714+01:00 0HN8E0LJLD5N5:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:08.5140358+01:00 0HN8E0LJLD5N5:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:31:08.5213207+01:00 0HN8E0LJLD5N5:00000009 [INF] Executed ViewResult - view "Login" executed in 7.9322ms. (f66409e9)
2024-11-26T11:31:08.5216492+01:00 0HN8E0LJLD5N5:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 16.8025ms (afa2e885)
2024-11-26T11:31:08.5217846+01:00 0HN8E0LJLD5N5:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:08.5220165+01:00 0HN8E0LJLD5N5:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 28.0478ms (74253ad3)
2024-11-26T11:31:08.5493957+01:00 0HN8E0LJLD5N5:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:31:08.5494206+01:00 0HN8E0LJLD5N5:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:31:08.5502620+01:00 0HN8E0LJLD5N5:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.1873ms (74253ad3)
2024-11-26T11:31:08.5668532+01:00 0HN8E0LJLD5N5:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 17.6372ms (74253ad3)
2024-11-26T11:31:16.4199951+01:00 0HN8E0LJLD5N5:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:31:16.4231206+01:00 0HN8E0LJLD5N5:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:16.4300328+01:00 0HN8E0LJLD5N5:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:17.1866589+01:00 0HN8E0LJLD5N5:0000000F [INF] Executed DbCommand ("32"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:31:17.2476493+01:00 0HN8E0LJLD5N5:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:31:17.2512606+01:00 0HN8E0LJLD5N5:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:31:17.2629299+01:00 0HN8E0LJLD5N5:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:31:17.2634294+01:00 0HN8E0LJLD5N5:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 833.3262ms (afa2e885)
2024-11-26T11:31:17.2636020+01:00 0HN8E0LJLD5N5:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:17.2666828+01:00 0HN8E0LJLD5N5:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 846.7851ms (74253ad3)
2024-11-26T11:31:17.2678475+01:00 0HN8E0LJLD5N5:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:31:17.2779127+01:00 0HN8E0LJLD5N5:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:17.2812851+01:00 0HN8E0LJLD5N5:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:17.3683173+01:00 0HN8E0LJLD5N5:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T11:31:17.3889160+01:00 0HN8E0LJLD5N5:00000011 [INF] Executed DbCommand ("10"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:31:17.3902911+01:00 0HN8E0LJLD5N5:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:31:17.3938392+01:00 0HN8E0LJLD5N5:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.8844ms. (f66409e9)
2024-11-26T11:31:17.3939658+01:00 0HN8E0LJLD5N5:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 112.5826ms (afa2e885)
2024-11-26T11:31:17.3940092+01:00 0HN8E0LJLD5N5:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:17.3944988+01:00 0HN8E0LJLD5N5:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:31:17.3948098+01:00 0HN8E0LJLD5N5:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:31:17.3953968+01:00 0HN8E0LJLD5N5:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 127.5363ms (74253ad3)
2024-11-26T11:31:20.5545316+01:00 0HN8E0LJLD5N5:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:31:20.5586447+01:00 0HN8E0LJLD5N5:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:20.5602923+01:00 0HN8E0LJLD5N5:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:20.6180323+01:00 0HN8E0LJLD5N5:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:31:20.6198957+01:00 0HN8E0LJLD5N5:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:31:20.6224469+01:00 0HN8E0LJLD5N5:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 2.9356ms. (f66409e9)
2024-11-26T11:31:20.6225056+01:00 0HN8E0LJLD5N5:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 62.1645ms (afa2e885)
2024-11-26T11:31:20.6225267+01:00 0HN8E0LJLD5N5:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:20.6225692+01:00 0HN8E0LJLD5N5:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:31:20.6225891+01:00 0HN8E0LJLD5N5:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:31:20.6227030+01:00 0HN8E0LJLD5N5:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 68.2593ms (74253ad3)
2024-11-26T11:31:29.1585174+01:00 0HN8E0LJLD5N5:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 551 (d509f86a)
2024-11-26T11:31:29.1614890+01:00 0HN8E0LJLD5N5:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:29.1669282+01:00 0HN8E0LJLD5N5:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:31:31.5286288+01:00 0HN8E0LJLD5N5:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:31:31.5377402+01:00 0HN8E0LJLD5N5:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:31:31.6454909+01:00 0HN8E0LJLD5N5:00000015 [ERR] Failed executing DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:31:31.6678393+01:00 0HN8E0LJLD5N5:00000015 [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
2024-11-26T11:31:31.7142380+01:00 0HN8E0LJLD5N5:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 2547.2256ms (afa2e885)
2024-11-26T11:31:31.7144660+01:00 0HN8E0LJLD5N5:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:31:31.7213480+01:00 0HN8E0LJLD5N5:00000015 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 79
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:31:31.7498144+01:00 0HN8E0LJLD5N5:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 2591.2954ms (74253ad3)
2024-11-26T11:31:31.7651192+01:00 0HN8E0LJLD5N5:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:31:31.7703228+01:00 0HN8E0LJLD5N5:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:31:31.7713150+01:00 0HN8E0LJLD5N5:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.0473ms (74253ad3)
2024-11-26T11:31:31.7796247+01:00 0HN8E0LJLD5N5:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 14.6152ms (74253ad3)
2024-11-26T11:31:45.2278851+01:00 0HN8E0LJLD5N5:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 551 (d509f86a)
2024-11-26T11:31:45.2301179+01:00 0HN8E0LJLD5N5:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:31:45.2303222+01:00 0HN8E0LJLD5N5:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:05.5481591+01:00 0HN8E0LJLD5N5:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:32:05.5499168+01:00 0HN8E0LJLD5N5:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:32:05.5537708+01:00 0HN8E0LJLD5N5:0000001B [ERR] Failed executing DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:32:05.5563354+01:00 0HN8E0LJLD5N5:0000001B [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task, ConfigureAwaitOptions options)
2024-11-26T11:32:05.5928212+01:00 0HN8E0LJLD5N5:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 20362.2711ms (afa2e885)
2024-11-26T11:32:05.5931928+01:00 0HN8E0LJLD5N5:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:05.5952458+01:00 0HN8E0LJLD5N5:0000001B [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 79
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:32:05.6012012+01:00 0HN8E0LJLD5N5:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 20373.521ms (74253ad3)
2024-11-26T11:32:05.6422278+01:00 0HN8E0LJLD5N5:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:32:05.6423352+01:00 0HN8E0LJLD5N5:0000001F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:32:05.6432647+01:00 0HN8E0LJLD5N5:0000001F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.0327ms (74253ad3)
2024-11-26T11:32:05.6500334+01:00 0HN8E0LJLD5N5:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 7.9985ms (74253ad3)
2024-11-26T11:32:08.7844012+01:00 0HN8E0LJLD5N5:00000021 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - "application/x-www-form-urlencoded" 0 (d509f86a)
2024-11-26T11:32:08.7859490+01:00 0HN8E0LJLD5N5:00000021 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:08.7886242+01:00 0HN8E0LJLD5N5:00000021 [INF] Route matched with "{action = \"Logout\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:08.7911002+01:00 0HN8E0LJLD5N5:00000021 [INF] AuthenticationScheme: "Cookies" signed out. (d3f50c8d)
2024-11-26T11:32:08.7921816+01:00 0HN8E0LJLD5N5:00000021 [INF] Executing RedirectResult, redirecting to "/api/Employees". (d98d540e)
2024-11-26T11:32:08.7923180+01:00 0HN8E0LJLD5N5:00000021 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)" in 3.6435ms (afa2e885)
2024-11-26T11:32:08.7923717+01:00 0HN8E0LJLD5N5:00000021 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:08.7928017+01:00 0HN8E0LJLD5N5:00000021 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - 302 0 null 8.4098ms (74253ad3)
2024-11-26T11:32:08.7958657+01:00 0HN8E0LJLD5N5:00000023 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:32:08.7970242+01:00 0HN8E0LJLD5N5:00000023 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:08.7970884+01:00 0HN8E0LJLD5N5:00000023 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:08.7975422+01:00 0HN8E0LJLD5N5:00000023 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:32:08.7984247+01:00 0HN8E0LJLD5N5:00000023 [INF] Executed ViewResult - view "Acceuil" executed in 1.1626ms. (f66409e9)
2024-11-26T11:32:08.7984571+01:00 0HN8E0LJLD5N5:00000023 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 1.352ms (afa2e885)
2024-11-26T11:32:08.7984737+01:00 0HN8E0LJLD5N5:00000023 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:08.7985392+01:00 0HN8E0LJLD5N5:00000023 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 2.8812ms (74253ad3)
2024-11-26T11:32:08.8338755+01:00 0HN8E0LJLD5N5:00000027 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:32:08.8338763+01:00 0HN8E0LJLD5N5:00000025 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:32:08.8344569+01:00 0HN8E0LJLD5N5:00000025 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.6248ms (74253ad3)
2024-11-26T11:32:08.8451001+01:00 0HN8E0LJLD5N5:00000027 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 11.2437ms (74253ad3)
2024-11-26T11:32:10.6539852+01:00 0HN8E0LJLD5N5:00000029 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:32:10.6565864+01:00 0HN8E0LJLD5N5:00000029 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:10.6567060+01:00 0HN8E0LJLD5N5:00000029 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:10.6570089+01:00 0HN8E0LJLD5N5:00000029 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:32:10.6579390+01:00 0HN8E0LJLD5N5:00000029 [INF] Executed ViewResult - view "Login" executed in 0.9606ms. (f66409e9)
2024-11-26T11:32:10.6579898+01:00 0HN8E0LJLD5N5:00000029 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 1.2461ms (afa2e885)
2024-11-26T11:32:10.6580192+01:00 0HN8E0LJLD5N5:00000029 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:10.6581174+01:00 0HN8E0LJLD5N5:00000029 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 4.1827ms (74253ad3)
2024-11-26T11:32:10.6814488+01:00 0HN8E0LJLD5N5:0000002B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:32:10.6837142+01:00 0HN8E0LJLD5N5:0000002D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:32:10.6861854+01:00 0HN8E0LJLD5N5:0000002D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 2.8771ms (74253ad3)
2024-11-26T11:32:10.6983621+01:00 0HN8E0LJLD5N5:0000002B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 17.0519ms (74253ad3)
2024-11-26T11:32:12.0143040+01:00 0HN8E0LJLD5N5:0000002F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T11:32:12.0161691+01:00 0HN8E0LJLD5N5:0000002F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:12.0163278+01:00 0HN8E0LJLD5N5:0000002F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:12.0194119+01:00 0HN8E0LJLD5N5:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:32:12.0229478+01:00 0HN8E0LJLD5N5:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:32:12.0236742+01:00 0HN8E0LJLD5N5:0000002F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:32:12.0238845+01:00 0HN8E0LJLD5N5:0000002F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:32:12.0239946+01:00 0HN8E0LJLD5N5:0000002F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 7.6217ms (afa2e885)
2024-11-26T11:32:12.0240260+01:00 0HN8E0LJLD5N5:0000002F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:12.0241880+01:00 0HN8E0LJLD5N5:0000002F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 10.1672ms (74253ad3)
2024-11-26T11:32:12.0269169+01:00 0HN8E0LJLD5N5:00000031 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:32:12.0285405+01:00 0HN8E0LJLD5N5:00000031 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:12.0286342+01:00 0HN8E0LJLD5N5:00000031 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:12.0327479+01:00 0HN8E0LJLD5N5:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:32:12.0984702+01:00 0HN8E0LJLD5N5:00000031 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:32:12.0992469+01:00 0HN8E0LJLD5N5:00000031 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.8129ms. (f66409e9)
2024-11-26T11:32:12.0992888+01:00 0HN8E0LJLD5N5:00000031 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 70.6235ms (afa2e885)
2024-11-26T11:32:12.0993062+01:00 0HN8E0LJLD5N5:00000031 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:12.0993641+01:00 0HN8E0LJLD5N5:00000031 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:32:12.0993789+01:00 0HN8E0LJLD5N5:00000031 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:32:12.0994607+01:00 0HN8E0LJLD5N5:00000031 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 72.7359ms (74253ad3)
2024-11-26T11:32:15.6485309+01:00 0HN8E0LJLD5N5:00000033 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:32:15.6501650+01:00 0HN8E0LJLD5N5:00000033 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:15.6502855+01:00 0HN8E0LJLD5N5:00000033 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:15.6546515+01:00 0HN8E0LJLD5N5:00000033 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:32:15.6550005+01:00 0HN8E0LJLD5N5:00000033 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:32:15.6559785+01:00 0HN8E0LJLD5N5:00000033 [INF] Executed ViewResult - view "CreateDemande" executed in 0.9938ms. (f66409e9)
2024-11-26T11:32:15.6560594+01:00 0HN8E0LJLD5N5:00000033 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 5.7282ms (afa2e885)
2024-11-26T11:32:15.6561270+01:00 0HN8E0LJLD5N5:00000033 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:15.6563554+01:00 0HN8E0LJLD5N5:00000033 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:32:15.6564158+01:00 0HN8E0LJLD5N5:00000033 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:32:15.6565651+01:00 0HN8E0LJLD5N5:00000033 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 8.2854ms (74253ad3)
2024-11-26T11:32:21.3095878+01:00 0HN8E0LJLD5N5:00000035 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 551 (d509f86a)
2024-11-26T11:32:21.3110322+01:00 0HN8E0LJLD5N5:00000035 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:21.3111226+01:00 0HN8E0LJLD5N5:00000035 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:32:25.2317645+01:00 0HN8E0LJLD5N5:00000035 [INF] Executed DbCommand ("3"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:32:25.2347704+01:00 0HN8E0LJLD5N5:00000035 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:32:25.2397458+01:00 0HN8E0LJLD5N5:00000035 [ERR] Failed executing DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (627a98df)
2024-11-26T11:32:25.2433217+01:00 0HN8E0LJLD5N5:00000035 [ERR] An exception occurred in the database while saving changes for context type '"StockManagement.Infrastructure.ApplicationDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_Demandes_Users_UserId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Users\", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY \"FK_HistoriqueStatusDemandes_Demandes_DemandeId\". Le conflit s'est produit dans la base de données \"EmployeeDB\", table \"dbo.Demandes\", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 79
2024-11-26T11:32:25.2780433+01:00 0HN8E0LJLD5N5:00000035 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 3966.8505ms (afa2e885)
2024-11-26T11:32:25.2782089+01:00 0HN8E0LJLD5N5:00000035 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:32:25.2795909+01:00 0HN8E0LJLD5N5:00000035 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_Demandes_Users_UserId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Users", column 'Id'.
L'instruction INSERT est en conflit avec la contrainte FOREIGN KEY "FK_HistoriqueStatusDemandes_Demandes_DemandeId". Le conflit s'est produit dans la base de données "EmployeeDB", table "dbo.Demandes", column 'Id'.
L'instruction a été arrêtée.
L'instruction a été arrêtée.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d7894b6c-9cdd-4ae0-86e2-dcde40d94c6f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at StockManagement.Application.Features.Demandes.Commands.CreateDeamandeHandler.Handle(CreateDemandeCommand request, CancellationToken cancellationToken) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Application\Features\Demandes\Commands\CreateDemandeCommand.cs:line 73
   at DemandesController.CreateDemande(CreateDemandeDTO model) in C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web\Controllers\DemandesController.cs:line 79
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-26T11:32:25.2834682+01:00 0HN8E0LJLD5N5:00000035 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 500 null "text/html; charset=utf-8" 3973.9197ms (74253ad3)
2024-11-26T11:32:25.3062436+01:00 0HN8E0LJLD5N5:00000037 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:32:25.3130474+01:00 0HN8E0LJLD5N5:00000039 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:32:25.3138379+01:00 0HN8E0LJLD5N5:00000039 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.0538ms (74253ad3)
2024-11-26T11:32:25.3138379+01:00 0HN8E0LJLD5N5:00000037 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 7.7888ms (74253ad3)
2024-11-26T11:32:46.0643336+01:00 0HN8E0LJLD5N5:0000003B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 551 (d509f86a)
2024-11-26T11:32:46.0658599+01:00 0HN8E0LJLD5N5:0000003B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:32:46.0659641+01:00 0HN8E0LJLD5N5:0000003B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:32.6892287+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T11:34:32.8616196+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T11:34:32.8617769+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T11:34:32.8875609+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T11:34:32.8879298+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T11:34:32.8879876+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T11:34:33.3764772+01:00 0HN8E0NLB27DB:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T11:34:33.5006722+01:00 0HN8E0NLB27DB:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 130.3371ms (74253ad3)
2024-11-26T11:34:33.5016556+01:00 0HN8E0NLB27DB:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T11:34:40.6660968+01:00 0HN8E0NLB27DB:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:34:40.6742364+01:00 0HN8E0NLB27DB:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:40.6815468+01:00 0HN8E0NLB27DB:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:40.8029949+01:00 0HN8E0NLB27DB:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:34:40.8250126+01:00 0HN8E0NLB27DB:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 22.4365ms. (f66409e9)
2024-11-26T11:34:40.8255268+01:00 0HN8E0NLB27DB:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 143.6517ms (afa2e885)
2024-11-26T11:34:40.8255956+01:00 0HN8E0NLB27DB:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:34:40.8277753+01:00 0HN8E0NLB27DB:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 161.7955ms (74253ad3)
2024-11-26T11:34:40.8550701+01:00 0HN8E0NLB27DB:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:34:40.8550714+01:00 0HN8E0NLB27DB:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:34:40.8675944+01:00 0HN8E0NLB27DB:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 12.8045ms (74253ad3)
2024-11-26T11:34:40.8861846+01:00 0HN8E0NLB27DB:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 31.2806ms (74253ad3)
2024-11-26T11:34:41.7434585+01:00 0HN8E0NLB27DB:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:34:41.7477476+01:00 0HN8E0NLB27DB:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:41.7496111+01:00 0HN8E0NLB27DB:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:41.7536589+01:00 0HN8E0NLB27DB:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:34:41.7586837+01:00 0HN8E0NLB27DB:00000009 [INF] Executed ViewResult - view "Login" executed in 5.4554ms. (f66409e9)
2024-11-26T11:34:41.7588196+01:00 0HN8E0NLB27DB:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 9.1612ms (afa2e885)
2024-11-26T11:34:41.7588422+01:00 0HN8E0NLB27DB:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:34:41.7589453+01:00 0HN8E0NLB27DB:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 15.6833ms (74253ad3)
2024-11-26T11:34:41.7806796+01:00 0HN8E0NLB27DB:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:34:41.7812086+01:00 0HN8E0NLB27DB:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:34:41.7819159+01:00 0HN8E0NLB27DB:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.3603ms (74253ad3)
2024-11-26T11:34:41.7953138+01:00 0HN8E0NLB27DB:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 14.433ms (74253ad3)
2024-11-26T11:34:43.2932140+01:00 0HN8E0NLB27DB:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T11:34:43.2995113+01:00 0HN8E0NLB27DB:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:43.3130458+01:00 0HN8E0NLB27DB:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:44.1162070+01:00 0HN8E0NLB27DB:0000000F [INF] Executed DbCommand ("34"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:34:44.1797382+01:00 0HN8E0NLB27DB:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:34:44.1834053+01:00 0HN8E0NLB27DB:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:34:44.1925619+01:00 0HN8E0NLB27DB:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:34:44.1930946+01:00 0HN8E0NLB27DB:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 879.9485ms (afa2e885)
2024-11-26T11:34:44.1932502+01:00 0HN8E0NLB27DB:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:34:44.1970502+01:00 0HN8E0NLB27DB:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:34:44.1974158+01:00 0HN8E0NLB27DB:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 904.8136ms (74253ad3)
2024-11-26T11:34:44.2026355+01:00 0HN8E0NLB27DB:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:44.2050283+01:00 0HN8E0NLB27DB:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:44.2833552+01:00 0HN8E0NLB27DB:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T11:34:44.3061615+01:00 0HN8E0NLB27DB:00000011 [INF] Executed DbCommand ("12"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:34:44.4027200+01:00 0HN8E0NLB27DB:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:34:44.4063266+01:00 0HN8E0NLB27DB:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.9323ms. (f66409e9)
2024-11-26T11:34:44.4064129+01:00 0HN8E0NLB27DB:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 201.3011ms (afa2e885)
2024-11-26T11:34:44.4064340+01:00 0HN8E0NLB27DB:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:34:44.4067348+01:00 0HN8E0NLB27DB:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:34:44.4068742+01:00 0HN8E0NLB27DB:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:34:44.4070006+01:00 0HN8E0NLB27DB:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 210.0541ms (74253ad3)
2024-11-26T11:34:47.3071237+01:00 0HN8E0NLB27DB:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:34:47.3115513+01:00 0HN8E0NLB27DB:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:47.3130137+01:00 0HN8E0NLB27DB:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:34:47.3675008+01:00 0HN8E0NLB27DB:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:34:47.3697874+01:00 0HN8E0NLB27DB:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:34:47.3724425+01:00 0HN8E0NLB27DB:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.1162ms. (f66409e9)
2024-11-26T11:34:47.3725143+01:00 0HN8E0NLB27DB:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 59.449ms (afa2e885)
2024-11-26T11:34:47.3725528+01:00 0HN8E0NLB27DB:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:34:47.3726103+01:00 0HN8E0NLB27DB:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:34:47.3726394+01:00 0HN8E0NLB27DB:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:34:47.3728350+01:00 0HN8E0NLB27DB:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 65.8254ms (74253ad3)
2024-11-26T11:34:54.3753057+01:00 0HN8E0NLB27DB:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 550 (d509f86a)
2024-11-26T11:34:54.3786299+01:00 0HN8E0NLB27DB:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:34:54.3834067+01:00 0HN8E0NLB27DB:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:03.7310610+01:00 0HN8E0NLB27DB:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:35:03.7422250+01:00 0HN8E0NLB27DB:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:35:03.8231099+01:00 0HN8E0NLB27DB:00000015 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (0723d8ff)
2024-11-26T11:35:03.8375018+01:00 0HN8E0NLB27DB:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:35:03.8376045+01:00 0HN8E0NLB27DB:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 9454.1377ms (afa2e885)
2024-11-26T11:35:03.8376290+01:00 0HN8E0NLB27DB:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:03.8377588+01:00 0HN8E0NLB27DB:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 9462.6744ms (74253ad3)
2024-11-26T11:35:03.8437727+01:00 0HN8E0NLB27DB:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:35:03.8452912+01:00 0HN8E0NLB27DB:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:03.8457119+01:00 0HN8E0NLB27DB:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:03.8509133+01:00 0HN8E0NLB27DB:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:35:03.8528409+01:00 0HN8E0NLB27DB:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:35:03.8539042+01:00 0HN8E0NLB27DB:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.2999ms. (f66409e9)
2024-11-26T11:35:03.8539649+01:00 0HN8E0NLB27DB:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 8.2093ms (afa2e885)
2024-11-26T11:35:03.8539943+01:00 0HN8E0NLB27DB:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:03.8540568+01:00 0HN8E0NLB27DB:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:03.8540877+01:00 0HN8E0NLB27DB:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:03.8542284+01:00 0HN8E0NLB27DB:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 10.8071ms (74253ad3)
2024-11-26T11:35:07.2982763+01:00 0HN8E0NLB27DB:00000019 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - "application/x-www-form-urlencoded" 0 (d509f86a)
2024-11-26T11:35:07.3006509+01:00 0HN8E0NLB27DB:00000019 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:07.3047111+01:00 0HN8E0NLB27DB:00000019 [INF] Route matched with "{action = \"Logout\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:07.3072628+01:00 0HN8E0NLB27DB:00000019 [INF] AuthenticationScheme: "Cookies" signed out. (d3f50c8d)
2024-11-26T11:35:07.3074955+01:00 0HN8E0NLB27DB:00000019 [INF] Executing RedirectResult, redirecting to "/api/Employees". (d98d540e)
2024-11-26T11:35:07.3075858+01:00 0HN8E0NLB27DB:00000019 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)" in 2.7932ms (afa2e885)
2024-11-26T11:35:07.3076252+01:00 0HN8E0NLB27DB:00000019 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:07.3077785+01:00 0HN8E0NLB27DB:00000019 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - 302 0 null 9.8686ms (74253ad3)
2024-11-26T11:35:07.3112316+01:00 0HN8E0NLB27DB:0000001B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:35:07.3136633+01:00 0HN8E0NLB27DB:0000001B [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:07.3137796+01:00 0HN8E0NLB27DB:0000001B [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:07.3140651+01:00 0HN8E0NLB27DB:0000001B [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:35:07.3148909+01:00 0HN8E0NLB27DB:0000001B [INF] Executed ViewResult - view "Acceuil" executed in 0.8558ms. (f66409e9)
2024-11-26T11:35:07.3149541+01:00 0HN8E0NLB27DB:0000001B [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 1.13ms (afa2e885)
2024-11-26T11:35:07.3149795+01:00 0HN8E0NLB27DB:0000001B [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:07.3150937+01:00 0HN8E0NLB27DB:0000001B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 4.2306ms (74253ad3)
2024-11-26T11:35:07.3520393+01:00 0HN8E0NLB27DB:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:35:07.3520517+01:00 0HN8E0NLB27DB:0000001F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:35:07.3525333+01:00 0HN8E0NLB27DB:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.7407ms (74253ad3)
2024-11-26T11:35:07.3582867+01:00 0HN8E0NLB27DB:0000001F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 6.4335ms (74253ad3)
2024-11-26T11:35:09.7005123+01:00 0HN8E0NLB27DB:00000021 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:35:09.7020670+01:00 0HN8E0NLB27DB:00000021 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:09.7021667+01:00 0HN8E0NLB27DB:00000021 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:09.7024484+01:00 0HN8E0NLB27DB:00000021 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:35:09.7030295+01:00 0HN8E0NLB27DB:00000021 [INF] Executed ViewResult - view "Login" executed in 0.6032ms. (f66409e9)
2024-11-26T11:35:09.7030566+01:00 0HN8E0NLB27DB:00000021 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 0.8645ms (afa2e885)
2024-11-26T11:35:09.7030702+01:00 0HN8E0NLB27DB:00000021 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:09.7031396+01:00 0HN8E0NLB27DB:00000021 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 2.8236ms (74253ad3)
2024-11-26T11:35:09.7248019+01:00 0HN8E0NLB27DB:00000023 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:35:09.7310301+01:00 0HN8E0NLB27DB:00000025 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:35:09.7327845+01:00 0HN8E0NLB27DB:00000025 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.9337ms (74253ad3)
2024-11-26T11:35:09.7328784+01:00 0HN8E0NLB27DB:00000023 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 8.2999ms (74253ad3)
2024-11-26T11:35:20.9736590+01:00 0HN8E0NLB27DB:00000027 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T11:35:20.9754316+01:00 0HN8E0NLB27DB:00000027 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:20.9755889+01:00 0HN8E0NLB27DB:00000027 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:20.9812754+01:00 0HN8E0NLB27DB:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:35:20.9871638+01:00 0HN8E0NLB27DB:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:35:20.9879294+01:00 0HN8E0NLB27DB:00000027 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:35:20.9881234+01:00 0HN8E0NLB27DB:00000027 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:35:20.9882227+01:00 0HN8E0NLB27DB:00000027 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 12.5565ms (afa2e885)
2024-11-26T11:35:20.9882638+01:00 0HN8E0NLB27DB:00000027 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:20.9884434+01:00 0HN8E0NLB27DB:00000027 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 14.834ms (74253ad3)
2024-11-26T11:35:20.9912103+01:00 0HN8E0NLB27DB:00000029 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:35:20.9929768+01:00 0HN8E0NLB27DB:00000029 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:20.9931255+01:00 0HN8E0NLB27DB:00000029 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:20.9966666+01:00 0HN8E0NLB27DB:00000029 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:35:20.9970311+01:00 0HN8E0NLB27DB:00000029 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:35:20.9979303+01:00 0HN8E0NLB27DB:00000029 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.9227ms. (f66409e9)
2024-11-26T11:35:20.9980331+01:00 0HN8E0NLB27DB:00000029 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 4.8368ms (afa2e885)
2024-11-26T11:35:20.9980830+01:00 0HN8E0NLB27DB:00000029 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:20.9982360+01:00 0HN8E0NLB27DB:00000029 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:20.9983698+01:00 0HN8E0NLB27DB:00000029 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:20.9990466+01:00 0HN8E0NLB27DB:00000029 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 7.5868ms (74253ad3)
2024-11-26T11:35:25.3702415+01:00 0HN8E0NLB27DB:0000002B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:35:25.3717541+01:00 0HN8E0NLB27DB:0000002B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:25.3718747+01:00 0HN8E0NLB27DB:0000002B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:25.3740588+01:00 0HN8E0NLB27DB:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:35:25.3744060+01:00 0HN8E0NLB27DB:0000002B [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:35:25.3749629+01:00 0HN8E0NLB27DB:0000002B [INF] Executed ViewResult - view "CreateDemande" executed in 0.5934ms. (f66409e9)
2024-11-26T11:35:25.3750126+01:00 0HN8E0NLB27DB:0000002B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 3.0716ms (afa2e885)
2024-11-26T11:35:25.3750320+01:00 0HN8E0NLB27DB:0000002B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:25.3750680+01:00 0HN8E0NLB27DB:0000002B [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:25.3750867+01:00 0HN8E0NLB27DB:0000002B [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:25.3751765+01:00 0HN8E0NLB27DB:0000002B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 5.0298ms (74253ad3)
2024-11-26T11:35:32.1788038+01:00 0HN8E0NLB27DB:0000002D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 550 (d509f86a)
2024-11-26T11:35:32.1802752+01:00 0HN8E0NLB27DB:0000002D [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:32.1803921+01:00 0HN8E0NLB27DB:0000002D [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:32.1841835+01:00 0HN8E0NLB27DB:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:35:32.1867786+01:00 0HN8E0NLB27DB:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:35:32.1901108+01:00 0HN8E0NLB27DB:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (0723d8ff)
2024-11-26T11:35:32.1922468+01:00 0HN8E0NLB27DB:0000002D [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:35:32.1923304+01:00 0HN8E0NLB27DB:0000002D [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 11.8895ms (afa2e885)
2024-11-26T11:35:32.1923574+01:00 0HN8E0NLB27DB:0000002D [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:32.1925033+01:00 0HN8E0NLB27DB:0000002D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 13.853ms (74253ad3)
2024-11-26T11:35:32.1953411+01:00 0HN8E0NLB27DB:0000002F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:35:32.1968010+01:00 0HN8E0NLB27DB:0000002F [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:32.1968893+01:00 0HN8E0NLB27DB:0000002F [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:32.2000024+01:00 0HN8E0NLB27DB:0000002F [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:35:32.2010493+01:00 0HN8E0NLB27DB:0000002F [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:35:32.2013871+01:00 0HN8E0NLB27DB:0000002F [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.3687ms. (f66409e9)
2024-11-26T11:35:32.2014632+01:00 0HN8E0NLB27DB:0000002F [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 4.5261ms (afa2e885)
2024-11-26T11:35:32.2015242+01:00 0HN8E0NLB27DB:0000002F [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:32.2016020+01:00 0HN8E0NLB27DB:0000002F [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:32.2016339+01:00 0HN8E0NLB27DB:0000002F [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:32.2017721+01:00 0HN8E0NLB27DB:0000002F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 6.5801ms (74253ad3)
2024-11-26T11:35:38.1989458+01:00 0HN8E0NLB27DB:00000031 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:35:38.2002014+01:00 0HN8E0NLB27DB:00000031 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:38.2002593+01:00 0HN8E0NLB27DB:00000031 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:38.2145903+01:00 0HN8E0NLB27DB:00000031 [INF] Executed DbCommand ("13"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:35:38.2153696+01:00 0HN8E0NLB27DB:00000031 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:35:38.2155906+01:00 0HN8E0NLB27DB:00000031 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.4077ms. (f66409e9)
2024-11-26T11:35:38.2156290+01:00 0HN8E0NLB27DB:00000031 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 15.3525ms (afa2e885)
2024-11-26T11:35:38.2156479+01:00 0HN8E0NLB27DB:00000031 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:38.2156954+01:00 0HN8E0NLB27DB:00000031 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:38.2157087+01:00 0HN8E0NLB27DB:00000031 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:38.2157821+01:00 0HN8E0NLB27DB:00000031 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 16.8736ms (74253ad3)
2024-11-26T11:35:47.4434519+01:00 0HN8E0NLB27DB:00000033 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - "application/x-www-form-urlencoded" 0 (d509f86a)
2024-11-26T11:35:47.4460346+01:00 0HN8E0NLB27DB:00000033 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:47.4461789+01:00 0HN8E0NLB27DB:00000033 [INF] Route matched with "{action = \"Logout\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:47.4466774+01:00 0HN8E0NLB27DB:00000033 [INF] AuthenticationScheme: "Cookies" signed out. (d3f50c8d)
2024-11-26T11:35:47.4468515+01:00 0HN8E0NLB27DB:00000033 [INF] Executing RedirectResult, redirecting to "/api/Employees". (d98d540e)
2024-11-26T11:35:47.4469126+01:00 0HN8E0NLB27DB:00000033 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)" in 0.6931ms (afa2e885)
2024-11-26T11:35:47.4469416+01:00 0HN8E0NLB27DB:00000033 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Logout (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:47.4470540+01:00 0HN8E0NLB27DB:00000033 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/Logout""" - 302 0 null 3.725ms (74253ad3)
2024-11-26T11:35:47.4504982+01:00 0HN8E0NLB27DB:00000035 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:35:47.4524311+01:00 0HN8E0NLB27DB:00000035 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:47.4525792+01:00 0HN8E0NLB27DB:00000035 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:47.4529921+01:00 0HN8E0NLB27DB:00000035 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:35:47.4543261+01:00 0HN8E0NLB27DB:00000035 [INF] Executed ViewResult - view "Acceuil" executed in 1.4063ms. (f66409e9)
2024-11-26T11:35:47.4543717+01:00 0HN8E0NLB27DB:00000035 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 1.756ms (afa2e885)
2024-11-26T11:35:47.4543958+01:00 0HN8E0NLB27DB:00000035 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:47.4544934+01:00 0HN8E0NLB27DB:00000035 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 4.2114ms (74253ad3)
2024-11-26T11:35:47.4931813+01:00 0HN8E0NLB27DB:00000039 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:35:47.4931851+01:00 0HN8E0NLB27DB:00000037 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:35:47.4942124+01:00 0HN8E0NLB27DB:00000037 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.2644ms (74253ad3)
2024-11-26T11:35:47.5054361+01:00 0HN8E0NLB27DB:00000039 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 12.4437ms (74253ad3)
2024-11-26T11:35:48.4632903+01:00 0HN8E0NLB27DB:0000003B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:35:48.4659863+01:00 0HN8E0NLB27DB:0000003B [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:48.4661356+01:00 0HN8E0NLB27DB:0000003B [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:48.4668048+01:00 0HN8E0NLB27DB:0000003B [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:35:48.4677000+01:00 0HN8E0NLB27DB:0000003B [INF] Executed ViewResult - view "Login" executed in 0.9173ms. (f66409e9)
2024-11-26T11:35:48.4677513+01:00 0HN8E0NLB27DB:0000003B [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 1.5707ms (afa2e885)
2024-11-26T11:35:48.4677721+01:00 0HN8E0NLB27DB:0000003B [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:48.4678671+01:00 0HN8E0NLB27DB:0000003B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 4.6736ms (74253ad3)
2024-11-26T11:35:48.4951965+01:00 0HN8E0NLB27DB:0000003D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:35:48.4951964+01:00 0HN8E0NLB27DB:0000003F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:35:48.4959727+01:00 0HN8E0NLB27DB:0000003D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.8204ms (74253ad3)
2024-11-26T11:35:48.5031053+01:00 0HN8E0NLB27DB:0000003F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 7.9424ms (74253ad3)
2024-11-26T11:35:49.9175567+01:00 0HN8E0NLB27DB:00000041 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T11:35:49.9188311+01:00 0HN8E0NLB27DB:00000041 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:49.9189378+01:00 0HN8E0NLB27DB:00000041 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:49.9264662+01:00 0HN8E0NLB27DB:00000041 [INF] Executed DbCommand ("6"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:35:49.9320994+01:00 0HN8E0NLB27DB:00000041 [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:35:49.9324660+01:00 0HN8E0NLB27DB:00000041 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:35:49.9326641+01:00 0HN8E0NLB27DB:00000041 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:35:49.9327533+01:00 0HN8E0NLB27DB:00000041 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 13.7468ms (afa2e885)
2024-11-26T11:35:49.9327858+01:00 0HN8E0NLB27DB:00000041 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:49.9330493+01:00 0HN8E0NLB27DB:00000041 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 15.607ms (74253ad3)
2024-11-26T11:35:49.9358903+01:00 0HN8E0NLB27DB:00000043 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:35:49.9375176+01:00 0HN8E0NLB27DB:00000043 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:35:49.9376132+01:00 0HN8E0NLB27DB:00000043 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:35:49.9573806+01:00 0HN8E0NLB27DB:00000043 [INF] Executed DbCommand ("18"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:35:49.9580081+01:00 0HN8E0NLB27DB:00000043 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:35:49.9582440+01:00 0HN8E0NLB27DB:00000043 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.2557ms. (f66409e9)
2024-11-26T11:35:49.9582902+01:00 0HN8E0NLB27DB:00000043 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 20.6462ms (afa2e885)
2024-11-26T11:35:49.9583125+01:00 0HN8E0NLB27DB:00000043 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:35:49.9583635+01:00 0HN8E0NLB27DB:00000043 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:35:49.9583775+01:00 0HN8E0NLB27DB:00000043 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:35:49.9584441+01:00 0HN8E0NLB27DB:00000043 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 22.8501ms (74253ad3)
2024-11-26T11:35:59.1975117+01:00 0HN8E0NLB27DB:00000045 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:35:59.1981071+01:00 0HN8E0NLB27DB:00000045 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 0.9408ms (74253ad3)
2024-11-26T11:36:02.9670879+01:00 0HN8E0NLB27DB:00000047 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T11:36:02.9686914+01:00 0HN8E0NLB27DB:00000047 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:36:02.9688460+01:00 0HN8E0NLB27DB:00000047 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:36:02.9740507+01:00 0HN8E0NLB27DB:00000047 [INF] Executed DbCommand ("3"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:36:02.9794578+01:00 0HN8E0NLB27DB:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:36:02.9799262+01:00 0HN8E0NLB27DB:00000047 [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:36:02.9801871+01:00 0HN8E0NLB27DB:00000047 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:36:02.9802513+01:00 0HN8E0NLB27DB:00000047 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 11.3441ms (afa2e885)
2024-11-26T11:36:02.9802745+01:00 0HN8E0NLB27DB:00000047 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:36:02.9803877+01:00 0HN8E0NLB27DB:00000047 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 13.512ms (74253ad3)
2024-11-26T11:36:02.9874813+01:00 0HN8E0NLB27DB:00000049 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:36:02.9898286+01:00 0HN8E0NLB27DB:00000049 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:36:02.9899970+01:00 0HN8E0NLB27DB:00000049 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:36:02.9944538+01:00 0HN8E0NLB27DB:00000049 [INF] Executed DbCommand ("3"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:36:02.9957951+01:00 0HN8E0NLB27DB:00000049 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:36:02.9962558+01:00 0HN8E0NLB27DB:00000049 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.4858ms. (f66409e9)
2024-11-26T11:36:02.9965741+01:00 0HN8E0NLB27DB:00000049 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 6.4831ms (afa2e885)
2024-11-26T11:36:02.9966439+01:00 0HN8E0NLB27DB:00000049 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:36:02.9967480+01:00 0HN8E0NLB27DB:00000049 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:36:02.9968179+01:00 0HN8E0NLB27DB:00000049 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:36:02.9969488+01:00 0HN8E0NLB27DB:00000049 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 10.0654ms (74253ad3)
2024-11-26T11:41:23.1835615+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T11:41:23.3535554+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T11:41:23.3536962+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T11:41:23.3806509+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T11:41:23.3809706+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T11:41:23.3809950+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T11:41:23.8606035+01:00 0HN8E0RFLRET5:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T11:41:23.9733906+01:00 0HN8E0RFLRET5:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 115.3422ms (74253ad3)
2024-11-26T11:41:23.9758219+01:00 0HN8E0RFLRET5:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T11:41:30.6568540+01:00 0HN8E0RFLRET5:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T11:41:30.6668504+01:00 0HN8E0RFLRET5:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:30.6757219+01:00 0HN8E0RFLRET5:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:30.8153842+01:00 0HN8E0RFLRET5:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T11:41:30.8368760+01:00 0HN8E0RFLRET5:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 22.1306ms. (f66409e9)
2024-11-26T11:41:30.8374234+01:00 0HN8E0RFLRET5:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 161.3445ms (afa2e885)
2024-11-26T11:41:30.8375035+01:00 0HN8E0RFLRET5:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:30.8400799+01:00 0HN8E0RFLRET5:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 183.2512ms (74253ad3)
2024-11-26T11:41:30.8665372+01:00 0HN8E0RFLRET5:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:41:30.8665371+01:00 0HN8E0RFLRET5:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:41:30.8800213+01:00 0HN8E0RFLRET5:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 14.2406ms (74253ad3)
2024-11-26T11:41:30.8991317+01:00 0HN8E0RFLRET5:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 32.8461ms (74253ad3)
2024-11-26T11:41:31.9402329+01:00 0HN8E0RFLRET5:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T11:41:31.9476328+01:00 0HN8E0RFLRET5:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:31.9491292+01:00 0HN8E0RFLRET5:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:31.9547017+01:00 0HN8E0RFLRET5:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T11:41:31.9620939+01:00 0HN8E0RFLRET5:00000009 [INF] Executed ViewResult - view "Login" executed in 8.5272ms. (f66409e9)
2024-11-26T11:41:31.9625119+01:00 0HN8E0RFLRET5:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 13.291ms (afa2e885)
2024-11-26T11:41:31.9625874+01:00 0HN8E0RFLRET5:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:31.9628551+01:00 0HN8E0RFLRET5:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 22.7406ms (74253ad3)
2024-11-26T11:41:31.9885109+01:00 0HN8E0RFLRET5:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T11:41:31.9885184+01:00 0HN8E0RFLRET5:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T11:41:31.9894176+01:00 0HN8E0RFLRET5:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.1961ms (74253ad3)
2024-11-26T11:41:32.0078347+01:00 0HN8E0RFLRET5:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 19.5778ms (74253ad3)
2024-11-26T11:41:33.3696429+01:00 0HN8E0RFLRET5:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T11:41:33.3738493+01:00 0HN8E0RFLRET5:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:33.3880400+01:00 0HN8E0RFLRET5:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:34.1754391+01:00 0HN8E0RFLRET5:0000000F [INF] Executed DbCommand ("33"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T11:41:34.2394896+01:00 0HN8E0RFLRET5:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T11:41:34.2426390+01:00 0HN8E0RFLRET5:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T11:41:34.2518562+01:00 0HN8E0RFLRET5:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:41:34.2523840+01:00 0HN8E0RFLRET5:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 864.2682ms (afa2e885)
2024-11-26T11:41:34.2525449+01:00 0HN8E0RFLRET5:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:34.2563244+01:00 0HN8E0RFLRET5:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 886.9323ms (74253ad3)
2024-11-26T11:41:34.2566264+01:00 0HN8E0RFLRET5:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:41:34.2630680+01:00 0HN8E0RFLRET5:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:34.2651725+01:00 0HN8E0RFLRET5:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:34.3470962+01:00 0HN8E0RFLRET5:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T11:41:34.3697261+01:00 0HN8E0RFLRET5:00000011 [INF] Executed DbCommand ("11"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:41:34.4607313+01:00 0HN8E0RFLRET5:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:41:34.4694706+01:00 0HN8E0RFLRET5:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 8.9846ms. (f66409e9)
2024-11-26T11:41:34.4695670+01:00 0HN8E0RFLRET5:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 204.3344ms (afa2e885)
2024-11-26T11:41:34.4695917+01:00 0HN8E0RFLRET5:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:34.4699406+01:00 0HN8E0RFLRET5:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:41:34.4700940+01:00 0HN8E0RFLRET5:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:41:34.4702550+01:00 0HN8E0RFLRET5:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 213.8216ms (74253ad3)
2024-11-26T11:41:37.7666974+01:00 0HN8E0RFLRET5:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:41:37.7707801+01:00 0HN8E0RFLRET5:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:37.7720954+01:00 0HN8E0RFLRET5:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:37.8258509+01:00 0HN8E0RFLRET5:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:41:37.8286008+01:00 0HN8E0RFLRET5:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:41:37.8313293+01:00 0HN8E0RFLRET5:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.1666ms. (f66409e9)
2024-11-26T11:41:37.8313802+01:00 0HN8E0RFLRET5:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 59.2353ms (afa2e885)
2024-11-26T11:41:37.8314014+01:00 0HN8E0RFLRET5:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:37.8314508+01:00 0HN8E0RFLRET5:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:41:37.8314769+01:00 0HN8E0RFLRET5:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:41:37.8315991+01:00 0HN8E0RFLRET5:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 65.1913ms (74253ad3)
2024-11-26T11:41:46.0712861+01:00 0HN8E0RFLRET5:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 550 (d509f86a)
2024-11-26T11:41:46.0744290+01:00 0HN8E0RFLRET5:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:46.0773666+01:00 0HN8E0RFLRET5:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:46.1058249+01:00 0HN8E0RFLRET5:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:41:46.1141823+01:00 0HN8E0RFLRET5:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:41:46.1942722+01:00 0HN8E0RFLRET5:00000015 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);" (0723d8ff)
2024-11-26T11:41:46.2065814+01:00 0HN8E0RFLRET5:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:41:46.2066761+01:00 0HN8E0RFLRET5:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 129.2479ms (afa2e885)
2024-11-26T11:41:46.2066957+01:00 0HN8E0RFLRET5:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:46.2068218+01:00 0HN8E0RFLRET5:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 135.6947ms (74253ad3)
2024-11-26T11:41:46.2095934+01:00 0HN8E0RFLRET5:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:41:46.2108334+01:00 0HN8E0RFLRET5:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:41:46.2109867+01:00 0HN8E0RFLRET5:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:41:46.2154946+01:00 0HN8E0RFLRET5:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:41:46.2166678+01:00 0HN8E0RFLRET5:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:41:46.2177873+01:00 0HN8E0RFLRET5:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.3091ms. (f66409e9)
2024-11-26T11:41:46.2178642+01:00 0HN8E0RFLRET5:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 6.8293ms (afa2e885)
2024-11-26T11:41:46.2179006+01:00 0HN8E0RFLRET5:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:41:46.2179726+01:00 0HN8E0RFLRET5:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:41:46.2180175+01:00 0HN8E0RFLRET5:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:41:46.2181599+01:00 0HN8E0RFLRET5:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 8.7496ms (74253ad3)
2024-11-26T11:42:17.7141144+01:00 0HN8E0RFLRET5:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:42:17.7167255+01:00 0HN8E0RFLRET5:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:42:17.7168979+01:00 0HN8E0RFLRET5:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:42:17.7216036+01:00 0HN8E0RFLRET5:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:42:17.7219554+01:00 0HN8E0RFLRET5:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:42:17.7227010+01:00 0HN8E0RFLRET5:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 0.7889ms. (f66409e9)
2024-11-26T11:42:17.7227578+01:00 0HN8E0RFLRET5:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 5.7771ms (afa2e885)
2024-11-26T11:42:17.7227851+01:00 0HN8E0RFLRET5:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:42:17.7228349+01:00 0HN8E0RFLRET5:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:42:17.7228786+01:00 0HN8E0RFLRET5:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:42:17.7230201+01:00 0HN8E0RFLRET5:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 9.2691ms (74253ad3)
2024-11-26T11:42:22.3758771+01:00 0HN8E0RFLRET5:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 546 (d509f86a)
2024-11-26T11:42:22.3813302+01:00 0HN8E0RFLRET5:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:42:22.3817309+01:00 0HN8E0RFLRET5:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:42:22.3998083+01:00 0HN8E0RFLRET5:0000001B [INF] Executed DbCommand ("11"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:42:22.4030853+01:00 0HN8E0RFLRET5:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:43:45.4108612+01:00 0HN8E0RFLRET5:0000001B [INF] Executed DbCommand ("30"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T11:43:45.4131115+01:00 0HN8E0RFLRET5:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T11:43:46.2951490+01:00 0HN8E0RFLRET5:0000001B [INF] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Guid), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (DbType = DateTime2), @p23='?' (DbType = Guid), @p24='?' (DbType = Guid), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Guid), @p28='?' (DbType = Boolean), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);" (0723d8ff)
2024-11-26T11:43:46.2964206+01:00 0HN8E0RFLRET5:0000001B [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T11:43:46.2965882+01:00 0HN8E0RFLRET5:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 83914.7013ms (afa2e885)
2024-11-26T11:43:46.2966335+01:00 0HN8E0RFLRET5:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:43:46.2968412+01:00 0HN8E0RFLRET5:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 83921.9756ms (74253ad3)
2024-11-26T11:43:46.3005778+01:00 0HN8E0RFLRET5:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:43:46.3049176+01:00 0HN8E0RFLRET5:0000001D [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:43:46.3050208+01:00 0HN8E0RFLRET5:0000001D [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:43:46.3203419+01:00 0HN8E0RFLRET5:0000001D [INF] Executed DbCommand ("14"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:43:46.3236708+01:00 0HN8E0RFLRET5:0000001D [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:43:46.3346273+01:00 0HN8E0RFLRET5:0000001D [INF] Executed ViewResult - view "DemandesListRequester" executed in 10.9846ms. (f66409e9)
2024-11-26T11:43:46.3354118+01:00 0HN8E0RFLRET5:0000001D [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 30.3476ms (afa2e885)
2024-11-26T11:43:46.3354541+01:00 0HN8E0RFLRET5:0000001D [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:43:46.3355313+01:00 0HN8E0RFLRET5:0000001D [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:43:46.3355456+01:00 0HN8E0RFLRET5:0000001D [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:43:46.3357047+01:00 0HN8E0RFLRET5:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 35.2946ms (74253ad3)
2024-11-26T11:45:37.7205448+01:00 0HN8E0RFLRET5:0000001F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T11:45:37.7327579+01:00 0HN8E0RFLRET5:0000001F [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T11:45:37.7330997+01:00 0HN8E0RFLRET5:0000001F [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:45:37.7595962+01:00 0HN8E0RFLRET5:0000001F [INF] Executed DbCommand ("25"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T11:45:37.7598430+01:00 0HN8E0RFLRET5:0000001F [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T11:45:37.7600849+01:00 0HN8E0RFLRET5:0000001F [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.2832ms. (f66409e9)
2024-11-26T11:45:37.7601175+01:00 0HN8E0RFLRET5:0000001F [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 26.9849ms (afa2e885)
2024-11-26T11:45:37.7601333+01:00 0HN8E0RFLRET5:0000001F [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T11:45:37.7601746+01:00 0HN8E0RFLRET5:0000001F [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:45:37.7601934+01:00 0HN8E0RFLRET5:0000001F [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:45:37.7602751+01:00 0HN8E0RFLRET5:0000001F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 40.7821ms (74253ad3)
2024-11-26T11:45:40.3700810+01:00 0HN8E0RFLRET5:00000021 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T11:45:40.3720151+01:00 0HN8E0RFLRET5:00000021 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:45:40.3721188+01:00 0HN8E0RFLRET5:00000021 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T11:45:40.3792575+01:00 0HN8E0RFLRET5:00000021 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T11:45:40.3794922+01:00 0HN8E0RFLRET5:00000021 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T11:45:40.3804025+01:00 0HN8E0RFLRET5:00000021 [INF] Executed ViewResult - view "CreateDemande" executed in 0.9287ms. (f66409e9)
2024-11-26T11:45:40.3804725+01:00 0HN8E0RFLRET5:00000021 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 8.309ms (afa2e885)
2024-11-26T11:45:40.3805125+01:00 0HN8E0RFLRET5:00000021 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T11:45:40.3805680+01:00 0HN8E0RFLRET5:00000021 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T11:45:40.3806161+01:00 0HN8E0RFLRET5:00000021 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T11:45:40.3808154+01:00 0HN8E0RFLRET5:00000021 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 10.896ms (74253ad3)
2024-11-26T11:45:44.5588035+01:00 0HN8E0RFLRET5:00000023 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 546 (d509f86a)
2024-11-26T11:45:44.5600744+01:00 0HN8E0RFLRET5:00000023 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T11:45:44.5601720+01:00 0HN8E0RFLRET5:00000023 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:07.2329810+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:30:07.4561059+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:30:07.4562231+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:30:07.4825632+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:30:07.4828277+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:30:07.4828506+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:30:08.0275505+01:00 0HN8E1MN3MHNJ:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:30:08.1313928+01:00 0HN8E1MN3MHNJ:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 107.1627ms (74253ad3)
2024-11-26T12:30:08.1323430+01:00 0HN8E1MN3MHNJ:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:30:10.5210529+01:00 0HN8E1MN3MHNJ:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:30:10.5287717+01:00 0HN8E1MN3MHNJ:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:10.5373116+01:00 0HN8E1MN3MHNJ:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:10.6682371+01:00 0HN8E1MN3MHNJ:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:30:10.6920511+01:00 0HN8E1MN3MHNJ:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 24.2994ms. (f66409e9)
2024-11-26T12:30:10.6926849+01:00 0HN8E1MN3MHNJ:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 154.981ms (afa2e885)
2024-11-26T12:30:10.6927768+01:00 0HN8E1MN3MHNJ:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:30:10.6960479+01:00 0HN8E1MN3MHNJ:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 175.4796ms (74253ad3)
2024-11-26T12:30:10.7231801+01:00 0HN8E1MN3MHNJ:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:30:10.7234831+01:00 0HN8E1MN3MHNJ:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:30:10.7357601+01:00 0HN8E1MN3MHNJ:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 12.8151ms (74253ad3)
2024-11-26T12:30:10.7530914+01:00 0HN8E1MN3MHNJ:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 29.8167ms (74253ad3)
2024-11-26T12:30:11.7596508+01:00 0HN8E1MN3MHNJ:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:30:11.7660062+01:00 0HN8E1MN3MHNJ:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:11.7686919+01:00 0HN8E1MN3MHNJ:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:11.7778546+01:00 0HN8E1MN3MHNJ:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:30:11.7830101+01:00 0HN8E1MN3MHNJ:00000009 [INF] Executed ViewResult - view "Login" executed in 5.8568ms. (f66409e9)
2024-11-26T12:30:11.7831732+01:00 0HN8E1MN3MHNJ:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 14.3881ms (afa2e885)
2024-11-26T12:30:11.7832136+01:00 0HN8E1MN3MHNJ:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:30:11.7834191+01:00 0HN8E1MN3MHNJ:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 24.4156ms (74253ad3)
2024-11-26T12:30:11.8072680+01:00 0HN8E1MN3MHNJ:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:30:11.8082540+01:00 0HN8E1MN3MHNJ:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:30:11.8083505+01:00 0HN8E1MN3MHNJ:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.1477ms (74253ad3)
2024-11-26T12:30:11.8260961+01:00 0HN8E1MN3MHNJ:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 18.1047ms (74253ad3)
2024-11-26T12:30:12.5865112+01:00 0HN8E1MN3MHNJ:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T12:30:12.5921240+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:12.6092557+01:00 0HN8E1MN3MHNJ:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:13.5336267+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executed DbCommand ("39"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:30:13.6068964+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:30:13.6105468+01:00 0HN8E1MN3MHNJ:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:30:13.6212871+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:30:13.6219156+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 1012.5435ms (afa2e885)
2024-11-26T12:30:13.6220770+01:00 0HN8E1MN3MHNJ:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:30:13.6260833+01:00 0HN8E1MN3MHNJ:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:30:13.6265976+01:00 0HN8E1MN3MHNJ:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 1040.2986ms (74253ad3)
2024-11-26T12:30:13.6319180+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:13.6339900+01:00 0HN8E1MN3MHNJ:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:13.7284239+01:00 0HN8E1MN3MHNJ:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:30:13.7542501+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executed DbCommand ("14"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:30:13.7559717+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:30:13.7590340+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.45ms. (f66409e9)
2024-11-26T12:30:13.7591069+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 125.0653ms (afa2e885)
2024-11-26T12:30:13.7591296+01:00 0HN8E1MN3MHNJ:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:30:13.7594529+01:00 0HN8E1MN3MHNJ:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:30:13.7595971+01:00 0HN8E1MN3MHNJ:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:30:13.7597538+01:00 0HN8E1MN3MHNJ:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 133.8729ms (74253ad3)
2024-11-26T12:30:16.6601626+01:00 0HN8E1MN3MHNJ:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:30:16.6633726+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:16.6642515+01:00 0HN8E1MN3MHNJ:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:30:16.7131092+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:30:16.7151085+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:30:16.7190288+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 4.2934ms. (f66409e9)
2024-11-26T12:30:16.7190927+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 54.7995ms (afa2e885)
2024-11-26T12:30:16.7191155+01:00 0HN8E1MN3MHNJ:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:30:16.7191646+01:00 0HN8E1MN3MHNJ:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:30:16.7191844+01:00 0HN8E1MN3MHNJ:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:30:16.7193214+01:00 0HN8E1MN3MHNJ:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 59.3917ms (74253ad3)
2024-11-26T12:30:25.5406115+01:00 0HN8E1MN3MHNJ:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 548 (d509f86a)
2024-11-26T12:30:25.5446336+01:00 0HN8E1MN3MHNJ:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:30:25.5497453+01:00 0HN8E1MN3MHNJ:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:06.2963401+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:38:06.4654985+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:38:06.4656285+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:38:06.4917545+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:38:06.4920360+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:38:06.4920620+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:38:07.0159305+01:00 0HN8E1R5SFVV4:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:38:07.1217587+01:00 0HN8E1R5SFVV4:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 109.0077ms (74253ad3)
2024-11-26T12:38:07.1226911+01:00 0HN8E1R5SFVV4:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:38:09.7896861+01:00 0HN8E1R5SFVV4:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:38:09.7975381+01:00 0HN8E1R5SFVV4:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:09.8058279+01:00 0HN8E1R5SFVV4:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:09.9151610+01:00 0HN8E1R5SFVV4:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:38:09.9356882+01:00 0HN8E1R5SFVV4:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 20.8002ms. (f66409e9)
2024-11-26T12:38:09.9363756+01:00 0HN8E1R5SFVV4:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 130.1906ms (afa2e885)
2024-11-26T12:38:09.9364649+01:00 0HN8E1R5SFVV4:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:38:09.9384491+01:00 0HN8E1R5SFVV4:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 148.9388ms (74253ad3)
2024-11-26T12:38:09.9668574+01:00 0HN8E1R5SFVV4:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:38:09.9674472+01:00 0HN8E1R5SFVV4:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:38:09.9793267+01:00 0HN8E1R5SFVV4:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 12.7573ms (74253ad3)
2024-11-26T12:38:09.9972452+01:00 0HN8E1R5SFVV4:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 29.8217ms (74253ad3)
2024-11-26T12:38:13.1438250+01:00 0HN8E1R5SFVV4:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:38:13.1921392+01:00 0HN8E1R5SFVV4:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:13.1934062+01:00 0HN8E1R5SFVV4:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:13.1989182+01:00 0HN8E1R5SFVV4:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:38:13.2037637+01:00 0HN8E1R5SFVV4:00000009 [INF] Executed ViewResult - view "Login" executed in 5.2909ms. (f66409e9)
2024-11-26T12:38:13.2039049+01:00 0HN8E1R5SFVV4:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 10.4584ms (afa2e885)
2024-11-26T12:38:13.2039342+01:00 0HN8E1R5SFVV4:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:38:13.2040393+01:00 0HN8E1R5SFVV4:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 61.0113ms (74253ad3)
2024-11-26T12:38:13.2307123+01:00 0HN8E1R5SFVV4:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:38:13.2307289+01:00 0HN8E1R5SFVV4:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:38:13.2314695+01:00 0HN8E1R5SFVV4:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.146ms (74253ad3)
2024-11-26T12:38:13.2457397+01:00 0HN8E1R5SFVV4:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 15.2357ms (74253ad3)
2024-11-26T12:38:15.1170678+01:00 0HN8E1R5SFVV4:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 28 (d509f86a)
2024-11-26T12:38:15.1223887+01:00 0HN8E1R5SFVV4:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:15.1390661+01:00 0HN8E1R5SFVV4:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:15.8755436+01:00 0HN8E1R5SFVV4:0000000F [INF] Executed DbCommand ("35"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:38:15.9362595+01:00 0HN8E1R5SFVV4:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:38:15.9399154+01:00 0HN8E1R5SFVV4:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:38:15.9482749+01:00 0HN8E1R5SFVV4:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:38:15.9487090+01:00 0HN8E1R5SFVV4:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 809.5544ms (afa2e885)
2024-11-26T12:38:15.9488595+01:00 0HN8E1R5SFVV4:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:38:15.9520711+01:00 0HN8E1R5SFVV4:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 835.9416ms (74253ad3)
2024-11-26T12:38:15.9529231+01:00 0HN8E1R5SFVV4:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:38:15.9575399+01:00 0HN8E1R5SFVV4:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:15.9601988+01:00 0HN8E1R5SFVV4:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:16.0456460+01:00 0HN8E1R5SFVV4:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:38:16.0740133+01:00 0HN8E1R5SFVV4:00000011 [INF] Executed DbCommand ("15"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:38:16.0754308+01:00 0HN8E1R5SFVV4:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:38:16.0786126+01:00 0HN8E1R5SFVV4:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.5355ms. (f66409e9)
2024-11-26T12:38:16.0787101+01:00 0HN8E1R5SFVV4:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 118.4592ms (afa2e885)
2024-11-26T12:38:16.0787399+01:00 0HN8E1R5SFVV4:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:38:16.0790935+01:00 0HN8E1R5SFVV4:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:38:16.0792556+01:00 0HN8E1R5SFVV4:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:38:16.0794132+01:00 0HN8E1R5SFVV4:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 126.5414ms (74253ad3)
2024-11-26T12:38:18.5753196+01:00 0HN8E1R5SFVV4:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:38:18.5793777+01:00 0HN8E1R5SFVV4:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:18.5806987+01:00 0HN8E1R5SFVV4:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:18.6295084+01:00 0HN8E1R5SFVV4:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:38:18.6316312+01:00 0HN8E1R5SFVV4:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:38:18.6344626+01:00 0HN8E1R5SFVV4:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.2519ms. (f66409e9)
2024-11-26T12:38:18.6345150+01:00 0HN8E1R5SFVV4:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 53.7672ms (afa2e885)
2024-11-26T12:38:18.6345345+01:00 0HN8E1R5SFVV4:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:38:18.6345784+01:00 0HN8E1R5SFVV4:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:38:18.6345994+01:00 0HN8E1R5SFVV4:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:38:18.6347139+01:00 0HN8E1R5SFVV4:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 59.6882ms (74253ad3)
2024-11-26T12:38:32.0451778+01:00 0HN8E1R5SFVV4:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 319 (d509f86a)
2024-11-26T12:38:32.0497482+01:00 0HN8E1R5SFVV4:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:38:32.0547862+01:00 0HN8E1R5SFVV4:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:38:47.4406517+01:00 0HN8E1R5SFVV4:00000015 [INF] Executed DbCommand ("6"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:38:47.4476013+01:00 0HN8E1R5SFVV4:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:39:06.6452280+01:00 0HN8E1R5SFVV4:00000015 [INF] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (DbType = Int32), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p37='?' (DbType = Int32), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (DbType = Guid), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);" (0723d8ff)
2024-11-26T12:39:06.6608446+01:00 0HN8E1R5SFVV4:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:39:06.6609428+01:00 0HN8E1R5SFVV4:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 34606.0501ms (afa2e885)
2024-11-26T12:39:06.6609616+01:00 0HN8E1R5SFVV4:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:06.6610998+01:00 0HN8E1R5SFVV4:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 34615.9866ms (74253ad3)
2024-11-26T12:39:06.6657703+01:00 0HN8E1R5SFVV4:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:39:06.6674792+01:00 0HN8E1R5SFVV4:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:06.6676631+01:00 0HN8E1R5SFVV4:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:06.6933799+01:00 0HN8E1R5SFVV4:00000017 [INF] Executed DbCommand ("17"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:39:06.7591281+01:00 0HN8E1R5SFVV4:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:39:06.7604351+01:00 0HN8E1R5SFVV4:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.6254ms. (f66409e9)
2024-11-26T12:39:06.7605078+01:00 0HN8E1R5SFVV4:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 92.8061ms (afa2e885)
2024-11-26T12:39:06.7605382+01:00 0HN8E1R5SFVV4:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:06.7605988+01:00 0HN8E1R5SFVV4:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:39:06.7606320+01:00 0HN8E1R5SFVV4:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:39:06.7607679+01:00 0HN8E1R5SFVV4:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 95.1022ms (74253ad3)
2024-11-26T12:39:46.6152175+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:39:46.7825741+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:39:46.7827668+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:39:46.8129372+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:39:46.8132765+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:39:46.8133006+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:39:47.3342878+01:00 0HN8E1S3OVKDV:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:39:47.4311991+01:00 0HN8E1S3OVKDV:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 99.7496ms (74253ad3)
2024-11-26T12:39:47.4321178+01:00 0HN8E1S3OVKDV:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:39:50.8115642+01:00 0HN8E1S3OVKDV:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:39:50.8294555+01:00 0HN8E1S3OVKDV:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:50.8431231+01:00 0HN8E1S3OVKDV:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:50.9526149+01:00 0HN8E1S3OVKDV:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:39:50.9712009+01:00 0HN8E1S3OVKDV:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 19.2708ms. (f66409e9)
2024-11-26T12:39:50.9716527+01:00 0HN8E1S3OVKDV:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 128.1475ms (afa2e885)
2024-11-26T12:39:50.9717171+01:00 0HN8E1S3OVKDV:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:50.9735423+01:00 0HN8E1S3OVKDV:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 162.2728ms (74253ad3)
2024-11-26T12:39:51.0050372+01:00 0HN8E1S3OVKDV:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:39:51.0054454+01:00 0HN8E1S3OVKDV:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:39:51.0209175+01:00 0HN8E1S3OVKDV:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 15.9277ms (74253ad3)
2024-11-26T12:39:51.0373133+01:00 0HN8E1S3OVKDV:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 32.0306ms (74253ad3)
2024-11-26T12:39:51.8746990+01:00 0HN8E1S3OVKDV:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:39:51.8793241+01:00 0HN8E1S3OVKDV:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:51.8811949+01:00 0HN8E1S3OVKDV:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:51.8866295+01:00 0HN8E1S3OVKDV:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:39:51.8911563+01:00 0HN8E1S3OVKDV:00000009 [INF] Executed ViewResult - view "Login" executed in 5.0124ms. (f66409e9)
2024-11-26T12:39:51.8912890+01:00 0HN8E1S3OVKDV:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 9.9208ms (afa2e885)
2024-11-26T12:39:51.8913137+01:00 0HN8E1S3OVKDV:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:51.8914200+01:00 0HN8E1S3OVKDV:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 17.0579ms (74253ad3)
2024-11-26T12:39:51.9162359+01:00 0HN8E1S3OVKDV:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:39:51.9171807+01:00 0HN8E1S3OVKDV:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.2028ms (74253ad3)
2024-11-26T12:39:51.9178798+01:00 0HN8E1S3OVKDV:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:39:51.9311702+01:00 0HN8E1S3OVKDV:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 13.366ms (74253ad3)
2024-11-26T12:39:55.5018139+01:00 0HN8E1S3OVKDV:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 47 (d509f86a)
2024-11-26T12:39:55.5047331+01:00 0HN8E1S3OVKDV:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:55.5176006+01:00 0HN8E1S3OVKDV:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:56.3024680+01:00 0HN8E1S3OVKDV:0000000F [INF] Executed DbCommand ("37"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:39:56.3682094+01:00 0HN8E1S3OVKDV:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:39:56.3724859+01:00 0HN8E1S3OVKDV:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:39:56.3827555+01:00 0HN8E1S3OVKDV:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:39:56.3832731+01:00 0HN8E1S3OVKDV:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 865.5896ms (afa2e885)
2024-11-26T12:39:56.3834509+01:00 0HN8E1S3OVKDV:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:56.3872063+01:00 0HN8E1S3OVKDV:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 885.4316ms (74253ad3)
2024-11-26T12:39:56.3872254+01:00 0HN8E1S3OVKDV:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:39:56.3915178+01:00 0HN8E1S3OVKDV:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:56.3941460+01:00 0HN8E1S3OVKDV:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:56.4783313+01:00 0HN8E1S3OVKDV:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:39:56.5032409+01:00 0HN8E1S3OVKDV:00000011 [INF] Executed DbCommand ("13"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:39:56.5046186+01:00 0HN8E1S3OVKDV:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:39:56.5075412+01:00 0HN8E1S3OVKDV:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.2565ms. (f66409e9)
2024-11-26T12:39:56.5076200+01:00 0HN8E1S3OVKDV:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 113.4098ms (afa2e885)
2024-11-26T12:39:56.5076431+01:00 0HN8E1S3OVKDV:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:56.5079391+01:00 0HN8E1S3OVKDV:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:39:56.5080842+01:00 0HN8E1S3OVKDV:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:39:56.5082244+01:00 0HN8E1S3OVKDV:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 121.0354ms (74253ad3)
2024-11-26T12:39:58.4270878+01:00 0HN8E1S3OVKDV:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:39:58.4311556+01:00 0HN8E1S3OVKDV:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:39:58.4324526+01:00 0HN8E1S3OVKDV:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:39:58.4850177+01:00 0HN8E1S3OVKDV:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:39:58.4871289+01:00 0HN8E1S3OVKDV:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:39:58.4898200+01:00 0HN8E1S3OVKDV:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.124ms. (f66409e9)
2024-11-26T12:39:58.4898613+01:00 0HN8E1S3OVKDV:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 57.3596ms (afa2e885)
2024-11-26T12:39:58.4898799+01:00 0HN8E1S3OVKDV:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:39:58.4899180+01:00 0HN8E1S3OVKDV:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:39:58.4899406+01:00 0HN8E1S3OVKDV:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:39:58.4900365+01:00 0HN8E1S3OVKDV:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 63.0324ms (74253ad3)
2024-11-26T12:40:04.3521083+01:00 0HN8E1S3OVKDV:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 315 (d509f86a)
2024-11-26T12:40:04.3568575+01:00 0HN8E1S3OVKDV:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:40:04.3630539+01:00 0HN8E1S3OVKDV:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:40:04.3821067+01:00 0HN8E1S3OVKDV:00000015 [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2024-11-26T12:40:04.3994586+01:00 0HN8E1S3OVKDV:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 36.3348ms (afa2e885)
2024-11-26T12:40:04.3994907+01:00 0HN8E1S3OVKDV:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:40:04.3995730+01:00 0HN8E1S3OVKDV:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 400 null "application/problem+json; charset=utf-8" 47.8109ms (74253ad3)
2024-11-26T12:44:21.7213891+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:44:21.8897426+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:44:21.8898534+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:44:21.9148021+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:44:21.9150592+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:44:21.9150859+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:44:22.4282941+01:00 0HN8E1ULOM3H2:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:44:22.5307845+01:00 0HN8E1ULOM3H2:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 106.3602ms (74253ad3)
2024-11-26T12:44:22.5323675+01:00 0HN8E1ULOM3H2:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:44:25.9207137+01:00 0HN8E1ULOM3H2:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:44:25.9364322+01:00 0HN8E1ULOM3H2:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:25.9481601+01:00 0HN8E1ULOM3H2:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:26.0639152+01:00 0HN8E1ULOM3H2:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:44:26.0859564+01:00 0HN8E1ULOM3H2:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 22.8613ms. (f66409e9)
2024-11-26T12:44:26.0864068+01:00 0HN8E1ULOM3H2:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 137.922ms (afa2e885)
2024-11-26T12:44:26.0864714+01:00 0HN8E1ULOM3H2:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:26.0883147+01:00 0HN8E1ULOM3H2:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 167.6949ms (74253ad3)
2024-11-26T12:44:26.1169448+01:00 0HN8E1ULOM3H2:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:44:26.1183286+01:00 0HN8E1ULOM3H2:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:44:26.1331905+01:00 0HN8E1ULOM3H2:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 16.4458ms (74253ad3)
2024-11-26T12:44:26.1525432+01:00 0HN8E1ULOM3H2:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 34.5089ms (74253ad3)
2024-11-26T12:44:27.0093723+01:00 0HN8E1ULOM3H2:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:44:27.0160892+01:00 0HN8E1ULOM3H2:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:27.0173278+01:00 0HN8E1ULOM3H2:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:27.0212566+01:00 0HN8E1ULOM3H2:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:44:27.0284483+01:00 0HN8E1ULOM3H2:00000009 [INF] Executed ViewResult - view "Login" executed in 7.6374ms. (f66409e9)
2024-11-26T12:44:27.0285958+01:00 0HN8E1ULOM3H2:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 11.222ms (afa2e885)
2024-11-26T12:44:27.0286242+01:00 0HN8E1ULOM3H2:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:27.0288063+01:00 0HN8E1ULOM3H2:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 19.6221ms (74253ad3)
2024-11-26T12:44:27.0536253+01:00 0HN8E1ULOM3H2:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:44:27.0540550+01:00 0HN8E1ULOM3H2:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:44:27.0547303+01:00 0HN8E1ULOM3H2:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.4024ms (74253ad3)
2024-11-26T12:44:27.0717412+01:00 0HN8E1ULOM3H2:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 17.8211ms (74253ad3)
2024-11-26T12:44:28.1840478+01:00 0HN8E1ULOM3H2:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T12:44:28.1877811+01:00 0HN8E1ULOM3H2:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:28.2010340+01:00 0HN8E1ULOM3H2:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:29.0200085+01:00 0HN8E1ULOM3H2:0000000F [INF] Executed DbCommand ("36"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:44:29.0830538+01:00 0HN8E1ULOM3H2:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:44:29.0865033+01:00 0HN8E1ULOM3H2:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:44:29.0950549+01:00 0HN8E1ULOM3H2:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:44:29.0955221+01:00 0HN8E1ULOM3H2:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 894.3993ms (afa2e885)
2024-11-26T12:44:29.0956592+01:00 0HN8E1ULOM3H2:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:29.0987461+01:00 0HN8E1ULOM3H2:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 914.9902ms (74253ad3)
2024-11-26T12:44:29.0994094+01:00 0HN8E1ULOM3H2:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:44:29.1041099+01:00 0HN8E1ULOM3H2:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:29.1061849+01:00 0HN8E1ULOM3H2:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:29.1865376+01:00 0HN8E1ULOM3H2:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:44:29.2107988+01:00 0HN8E1ULOM3H2:00000011 [INF] Executed DbCommand ("13"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:44:29.2122258+01:00 0HN8E1ULOM3H2:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:44:29.2153696+01:00 0HN8E1ULOM3H2:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.5044ms. (f66409e9)
2024-11-26T12:44:29.2154376+01:00 0HN8E1ULOM3H2:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 109.2075ms (afa2e885)
2024-11-26T12:44:29.2154609+01:00 0HN8E1ULOM3H2:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:29.2157547+01:00 0HN8E1ULOM3H2:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:44:29.2159022+01:00 0HN8E1ULOM3H2:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:44:29.2160404+01:00 0HN8E1ULOM3H2:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 116.8236ms (74253ad3)
2024-11-26T12:44:30.4371327+01:00 0HN8E1ULOM3H2:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:44:30.4424399+01:00 0HN8E1ULOM3H2:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:30.4438684+01:00 0HN8E1ULOM3H2:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:30.4988156+01:00 0HN8E1ULOM3H2:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:44:30.5008063+01:00 0HN8E1ULOM3H2:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:44:30.5044389+01:00 0HN8E1ULOM3H2:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 4.0176ms. (f66409e9)
2024-11-26T12:44:30.5045137+01:00 0HN8E1ULOM3H2:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 60.5951ms (afa2e885)
2024-11-26T12:44:30.5045371+01:00 0HN8E1ULOM3H2:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:30.5045914+01:00 0HN8E1ULOM3H2:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:44:30.5046128+01:00 0HN8E1ULOM3H2:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:44:30.5047355+01:00 0HN8E1ULOM3H2:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 68.0764ms (74253ad3)
2024-11-26T12:44:36.0536382+01:00 0HN8E1ULOM3H2:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 317 (d509f86a)
2024-11-26T12:44:36.0617350+01:00 0HN8E1ULOM3H2:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:36.0726762+01:00 0HN8E1ULOM3H2:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:36.1080997+01:00 0HN8E1ULOM3H2:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:44:36.1175909+01:00 0HN8E1ULOM3H2:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:44:36.2479716+01:00 0HN8E1ULOM3H2:00000015 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (DbType = Int32), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p37='?' (DbType = Int32), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (DbType = Guid), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);" (0723d8ff)
2024-11-26T12:44:36.2608762+01:00 0HN8E1ULOM3H2:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:44:36.2609737+01:00 0HN8E1ULOM3H2:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 188.2336ms (afa2e885)
2024-11-26T12:44:36.2609952+01:00 0HN8E1ULOM3H2:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:36.2611755+01:00 0HN8E1ULOM3H2:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 207.6514ms (74253ad3)
2024-11-26T12:44:36.2637846+01:00 0HN8E1ULOM3H2:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:44:36.2654478+01:00 0HN8E1ULOM3H2:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:36.2656204+01:00 0HN8E1ULOM3H2:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:36.2704646+01:00 0HN8E1ULOM3H2:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:44:36.3222614+01:00 0HN8E1ULOM3H2:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:44:36.3232371+01:00 0HN8E1ULOM3H2:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.0933ms. (f66409e9)
2024-11-26T12:44:36.3232831+01:00 0HN8E1ULOM3H2:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 57.6374ms (afa2e885)
2024-11-26T12:44:36.3233042+01:00 0HN8E1ULOM3H2:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:36.3233618+01:00 0HN8E1ULOM3H2:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:44:36.3233895+01:00 0HN8E1ULOM3H2:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:44:36.3234792+01:00 0HN8E1ULOM3H2:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 59.8623ms (74253ad3)
2024-11-26T12:44:41.4869416+01:00 0HN8E1ULOM3H2:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:44:41.4903206+01:00 0HN8E1ULOM3H2:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:41.4904336+01:00 0HN8E1ULOM3H2:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:41.4962000+01:00 0HN8E1ULOM3H2:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:44:41.4965864+01:00 0HN8E1ULOM3H2:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:44:41.4983594+01:00 0HN8E1ULOM3H2:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 1.7809ms. (f66409e9)
2024-11-26T12:44:41.4985180+01:00 0HN8E1ULOM3H2:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 8.0269ms (afa2e885)
2024-11-26T12:44:41.4985859+01:00 0HN8E1ULOM3H2:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:41.4986918+01:00 0HN8E1ULOM3H2:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:44:41.4987968+01:00 0HN8E1ULOM3H2:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:44:41.4991059+01:00 0HN8E1ULOM3H2:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 13.1546ms (74253ad3)
2024-11-26T12:44:44.8575295+01:00 0HN8E1ULOM3H2:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 315 (d509f86a)
2024-11-26T12:44:44.8591222+01:00 0HN8E1ULOM3H2:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:44:44.8592190+01:00 0HN8E1ULOM3H2:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:44:44.8691341+01:00 0HN8E1ULOM3H2:0000001B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2024-11-26T12:44:44.8821241+01:00 0HN8E1ULOM3H2:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 22.8481ms (afa2e885)
2024-11-26T12:44:44.8821556+01:00 0HN8E1ULOM3H2:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:44:44.8822310+01:00 0HN8E1ULOM3H2:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 400 null "application/problem+json; charset=utf-8" 24.7591ms (74253ad3)
2024-11-26T12:45:16.5445514+01:00 0HN8E1ULOM3H2:0000001D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 316 (d509f86a)
2024-11-26T12:45:16.5467653+01:00 0HN8E1ULOM3H2:0000001D [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:45:16.5468609+01:00 0HN8E1ULOM3H2:0000001D [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:45:16.5477230+01:00 0HN8E1ULOM3H2:0000001D [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2024-11-26T12:45:16.5479806+01:00 0HN8E1ULOM3H2:0000001D [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 1.0714ms (afa2e885)
2024-11-26T12:45:16.5480131+01:00 0HN8E1ULOM3H2:0000001D [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:45:16.5481113+01:00 0HN8E1ULOM3H2:0000001D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 400 null "application/problem+json; charset=utf-8" 3.7348ms (74253ad3)
2024-11-26T12:47:22.8166712+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:47:22.9847123+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:47:22.9848311+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:47:23.0089061+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:47:23.0091473+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:47:23.0091657+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:47:23.3597433+01:00 0HN8E20BMI1SI:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:47:23.4604116+01:00 0HN8E20BMI1SI:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 103.5554ms (74253ad3)
2024-11-26T12:47:23.4615052+01:00 0HN8E20BMI1SI:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:47:25.6518852+01:00 0HN8E20BMI1SI:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:47:25.6674384+01:00 0HN8E20BMI1SI:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:25.6787362+01:00 0HN8E20BMI1SI:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:25.7879923+01:00 0HN8E20BMI1SI:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:47:25.8080528+01:00 0HN8E20BMI1SI:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 20.7142ms. (f66409e9)
2024-11-26T12:47:25.8084739+01:00 0HN8E20BMI1SI:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 129.2518ms (afa2e885)
2024-11-26T12:47:25.8085487+01:00 0HN8E20BMI1SI:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:25.8105692+01:00 0HN8E20BMI1SI:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 158.8325ms (74253ad3)
2024-11-26T12:47:25.8401703+01:00 0HN8E20BMI1SI:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:47:25.8405452+01:00 0HN8E20BMI1SI:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:47:25.8557210+01:00 0HN8E20BMI1SI:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 15.6301ms (74253ad3)
2024-11-26T12:47:25.8716834+01:00 0HN8E20BMI1SI:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 31.3194ms (74253ad3)
2024-11-26T12:47:26.9694793+01:00 0HN8E20BMI1SI:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:47:26.9776548+01:00 0HN8E20BMI1SI:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:26.9790353+01:00 0HN8E20BMI1SI:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:26.9835361+01:00 0HN8E20BMI1SI:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:47:26.9881256+01:00 0HN8E20BMI1SI:00000009 [INF] Executed ViewResult - view "Login" executed in 5.036ms. (f66409e9)
2024-11-26T12:47:26.9883656+01:00 0HN8E20BMI1SI:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 9.2671ms (afa2e885)
2024-11-26T12:47:26.9884282+01:00 0HN8E20BMI1SI:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:26.9886292+01:00 0HN8E20BMI1SI:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 19.4784ms (74253ad3)
2024-11-26T12:47:27.0173728+01:00 0HN8E20BMI1SI:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:47:27.0177860+01:00 0HN8E20BMI1SI:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:47:27.0184441+01:00 0HN8E20BMI1SI:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.3638ms (74253ad3)
2024-11-26T12:47:27.0360384+01:00 0HN8E20BMI1SI:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 18.3457ms (74253ad3)
2024-11-26T12:47:28.7308912+01:00 0HN8E20BMI1SI:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T12:47:28.7403642+01:00 0HN8E20BMI1SI:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:28.7536509+01:00 0HN8E20BMI1SI:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:29.6645254+01:00 0HN8E20BMI1SI:0000000F [INF] Executed DbCommand ("40"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:47:29.7278210+01:00 0HN8E20BMI1SI:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:47:29.7314651+01:00 0HN8E20BMI1SI:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:47:29.7405724+01:00 0HN8E20BMI1SI:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:47:29.7410978+01:00 0HN8E20BMI1SI:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 987.3581ms (afa2e885)
2024-11-26T12:47:29.7412476+01:00 0HN8E20BMI1SI:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:29.7445574+01:00 0HN8E20BMI1SI:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 1014.2558ms (74253ad3)
2024-11-26T12:47:29.7450746+01:00 0HN8E20BMI1SI:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:47:29.7492085+01:00 0HN8E20BMI1SI:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:29.7514986+01:00 0HN8E20BMI1SI:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:29.8343111+01:00 0HN8E20BMI1SI:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:47:29.8596493+01:00 0HN8E20BMI1SI:00000011 [INF] Executed DbCommand ("14"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:47:29.9541469+01:00 0HN8E20BMI1SI:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:47:29.9583588+01:00 0HN8E20BMI1SI:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 4.5924ms. (f66409e9)
2024-11-26T12:47:29.9584683+01:00 0HN8E20BMI1SI:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 206.8751ms (afa2e885)
2024-11-26T12:47:29.9585158+01:00 0HN8E20BMI1SI:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:29.9588995+01:00 0HN8E20BMI1SI:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:47:29.9591156+01:00 0HN8E20BMI1SI:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:47:29.9593130+01:00 0HN8E20BMI1SI:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 214.3121ms (74253ad3)
2024-11-26T12:47:31.6056848+01:00 0HN8E20BMI1SI:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:47:31.6087691+01:00 0HN8E20BMI1SI:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:31.6095714+01:00 0HN8E20BMI1SI:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:31.6569153+01:00 0HN8E20BMI1SI:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:47:31.6590331+01:00 0HN8E20BMI1SI:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:47:31.6620399+01:00 0HN8E20BMI1SI:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.4053ms. (f66409e9)
2024-11-26T12:47:31.6620872+01:00 0HN8E20BMI1SI:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 52.4789ms (afa2e885)
2024-11-26T12:47:31.6621074+01:00 0HN8E20BMI1SI:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:31.6621531+01:00 0HN8E20BMI1SI:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:47:31.6621728+01:00 0HN8E20BMI1SI:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:47:31.6622803+01:00 0HN8E20BMI1SI:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 56.8194ms (74253ad3)
2024-11-26T12:47:36.9065403+01:00 0HN8E20BMI1SI:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 317 (d509f86a)
2024-11-26T12:47:36.9093113+01:00 0HN8E20BMI1SI:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:36.9177828+01:00 0HN8E20BMI1SI:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:39.2565209+01:00 0HN8E20BMI1SI:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:47:39.2662918+01:00 0HN8E20BMI1SI:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:47:39.3570700+01:00 0HN8E20BMI1SI:00000015 [INF] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (DbType = Int32), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p37='?' (DbType = Int32), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (DbType = Guid), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);" (0723d8ff)
2024-11-26T12:47:39.3700198+01:00 0HN8E20BMI1SI:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:47:39.3701123+01:00 0HN8E20BMI1SI:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 2452.2608ms (afa2e885)
2024-11-26T12:47:39.3701323+01:00 0HN8E20BMI1SI:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:39.3702545+01:00 0HN8E20BMI1SI:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 2464.0229ms (74253ad3)
2024-11-26T12:47:39.3755178+01:00 0HN8E20BMI1SI:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:47:39.3776945+01:00 0HN8E20BMI1SI:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:39.3778637+01:00 0HN8E20BMI1SI:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:39.3825478+01:00 0HN8E20BMI1SI:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:47:39.3864468+01:00 0HN8E20BMI1SI:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:47:39.3874411+01:00 0HN8E20BMI1SI:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.2175ms. (f66409e9)
2024-11-26T12:47:39.3875216+01:00 0HN8E20BMI1SI:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 9.6256ms (afa2e885)
2024-11-26T12:47:39.3875609+01:00 0HN8E20BMI1SI:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:39.3876301+01:00 0HN8E20BMI1SI:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:47:39.3876739+01:00 0HN8E20BMI1SI:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:47:39.3878134+01:00 0HN8E20BMI1SI:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 12.3644ms (74253ad3)
2024-11-26T12:47:42.5796209+01:00 0HN8E20BMI1SI:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:47:42.5812261+01:00 0HN8E20BMI1SI:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:42.5813682+01:00 0HN8E20BMI1SI:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:42.5845690+01:00 0HN8E20BMI1SI:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:47:42.5849153+01:00 0HN8E20BMI1SI:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:47:42.5863599+01:00 0HN8E20BMI1SI:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 1.4781ms. (f66409e9)
2024-11-26T12:47:42.5864517+01:00 0HN8E20BMI1SI:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 5.0146ms (afa2e885)
2024-11-26T12:47:42.5865243+01:00 0HN8E20BMI1SI:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:42.5866252+01:00 0HN8E20BMI1SI:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:47:42.5866847+01:00 0HN8E20BMI1SI:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:47:42.5868791+01:00 0HN8E20BMI1SI:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 7.5684ms (74253ad3)
2024-11-26T12:47:45.2238393+01:00 0HN8E20BMI1SI:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 315 (d509f86a)
2024-11-26T12:47:45.2253884+01:00 0HN8E20BMI1SI:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:47:45.2254804+01:00 0HN8E20BMI1SI:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:47:45.2362448+01:00 0HN8E20BMI1SI:0000001B [INF] Executing "BadRequestObjectResult", writing value of type '"Microsoft.AspNetCore.Mvc.ValidationProblemDetails"'. (605b4265)
2024-11-26T12:47:45.2524879+01:00 0HN8E20BMI1SI:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 26.9145ms (afa2e885)
2024-11-26T12:47:45.2525305+01:00 0HN8E20BMI1SI:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:47:45.2526350+01:00 0HN8E20BMI1SI:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 400 null "application/problem+json; charset=utf-8" 28.8478ms (74253ad3)
2024-11-26T12:52:57.0625258+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T12:52:57.2329732+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T12:52:57.2331975+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T12:52:57.2591567+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T12:52:57.2595572+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T12:52:57.2596013+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T12:52:57.7860392+01:00 0HN8E23FBMQMN:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T12:52:57.8916612+01:00 0HN8E23FBMQMN:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 108.8754ms (74253ad3)
2024-11-26T12:52:57.8925847+01:00 0HN8E23FBMQMN:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T12:53:01.0288210+01:00 0HN8E23FBMQMN:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T12:53:01.0348328+01:00 0HN8E23FBMQMN:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:01.0448266+01:00 0HN8E23FBMQMN:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:01.1411976+01:00 0HN8E23FBMQMN:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T12:53:01.1619206+01:00 0HN8E23FBMQMN:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 21.0436ms. (f66409e9)
2024-11-26T12:53:01.1623797+01:00 0HN8E23FBMQMN:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 117.2414ms (afa2e885)
2024-11-26T12:53:01.1624521+01:00 0HN8E23FBMQMN:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:01.1644657+01:00 0HN8E23FBMQMN:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 135.6947ms (74253ad3)
2024-11-26T12:53:01.1937389+01:00 0HN8E23FBMQMN:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:53:01.1939887+01:00 0HN8E23FBMQMN:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:53:01.2085358+01:00 0HN8E23FBMQMN:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 14.9685ms (74253ad3)
2024-11-26T12:53:01.2262842+01:00 0HN8E23FBMQMN:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 32.4676ms (74253ad3)
2024-11-26T12:53:01.9193143+01:00 0HN8E23FBMQMN:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T12:53:01.9243609+01:00 0HN8E23FBMQMN:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:01.9258477+01:00 0HN8E23FBMQMN:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:01.9305352+01:00 0HN8E23FBMQMN:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T12:53:01.9367480+01:00 0HN8E23FBMQMN:00000009 [INF] Executed ViewResult - view "Login" executed in 6.6867ms. (f66409e9)
2024-11-26T12:53:01.9369131+01:00 0HN8E23FBMQMN:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 11.0027ms (afa2e885)
2024-11-26T12:53:01.9369407+01:00 0HN8E23FBMQMN:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:01.9370691+01:00 0HN8E23FBMQMN:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 18.0996ms (74253ad3)
2024-11-26T12:53:01.9480630+01:00 0HN8E23FBMQMN:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T12:53:01.9492778+01:00 0HN8E23FBMQMN:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T12:53:01.9492779+01:00 0HN8E23FBMQMN:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.152ms (74253ad3)
2024-11-26T12:53:01.9674263+01:00 0HN8E23FBMQMN:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 18.2511ms (74253ad3)
2024-11-26T12:53:02.7331440+01:00 0HN8E23FBMQMN:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T12:53:02.7369458+01:00 0HN8E23FBMQMN:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:02.7489864+01:00 0HN8E23FBMQMN:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:03.6617465+01:00 0HN8E23FBMQMN:0000000F [INF] Executed DbCommand ("35"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T12:53:03.7275114+01:00 0HN8E23FBMQMN:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T12:53:03.7307038+01:00 0HN8E23FBMQMN:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T12:53:03.7420886+01:00 0HN8E23FBMQMN:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:53:03.7429670+01:00 0HN8E23FBMQMN:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 993.9016ms (afa2e885)
2024-11-26T12:53:03.7431179+01:00 0HN8E23FBMQMN:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:03.7476938+01:00 0HN8E23FBMQMN:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 1014.7031ms (74253ad3)
2024-11-26T12:53:03.7484595+01:00 0HN8E23FBMQMN:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:53:03.7566259+01:00 0HN8E23FBMQMN:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:03.7587558+01:00 0HN8E23FBMQMN:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:03.8411332+01:00 0HN8E23FBMQMN:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T12:53:03.8674106+01:00 0HN8E23FBMQMN:00000011 [INF] Executed DbCommand ("15"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:53:03.9664940+01:00 0HN8E23FBMQMN:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:53:03.9701206+01:00 0HN8E23FBMQMN:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.9455ms. (f66409e9)
2024-11-26T12:53:03.9701864+01:00 0HN8E23FBMQMN:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 211.3783ms (afa2e885)
2024-11-26T12:53:03.9702093+01:00 0HN8E23FBMQMN:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:03.9705307+01:00 0HN8E23FBMQMN:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:03.9706796+01:00 0HN8E23FBMQMN:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:03.9708213+01:00 0HN8E23FBMQMN:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 222.5902ms (74253ad3)
2024-11-26T12:53:06.0080893+01:00 0HN8E23FBMQMN:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:53:06.0128310+01:00 0HN8E23FBMQMN:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:06.0142661+01:00 0HN8E23FBMQMN:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:06.0652557+01:00 0HN8E23FBMQMN:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:53:06.0675134+01:00 0HN8E23FBMQMN:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:53:06.0703506+01:00 0HN8E23FBMQMN:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 3.2909ms. (f66409e9)
2024-11-26T12:53:06.0703918+01:00 0HN8E23FBMQMN:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 56.0756ms (afa2e885)
2024-11-26T12:53:06.0704112+01:00 0HN8E23FBMQMN:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:06.0704556+01:00 0HN8E23FBMQMN:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:06.0704778+01:00 0HN8E23FBMQMN:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:06.0705788+01:00 0HN8E23FBMQMN:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 62.7928ms (74253ad3)
2024-11-26T12:53:12.1518264+01:00 0HN8E23FBMQMN:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 317 (d509f86a)
2024-11-26T12:53:12.1548629+01:00 0HN8E23FBMQMN:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:12.1625642+01:00 0HN8E23FBMQMN:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:12.2028506+01:00 0HN8E23FBMQMN:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:53:12.2115085+01:00 0HN8E23FBMQMN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:53:12.3047070+01:00 0HN8E23FBMQMN:00000015 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (DbType = Int32), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Guid), @p37='?' (DbType = Int32), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = DateTime2), @p41='?' (DbType = Guid), @p42='?' (DbType = Boolean), @p43='?' (Size = 4000), @p44='?' (DbType = DateTime2), @p45='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);" (0723d8ff)
2024-11-26T12:53:12.3178564+01:00 0HN8E23FBMQMN:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:53:12.3179464+01:00 0HN8E23FBMQMN:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 155.3255ms (afa2e885)
2024-11-26T12:53:12.3179716+01:00 0HN8E23FBMQMN:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:12.3181010+01:00 0HN8E23FBMQMN:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 166.4919ms (74253ad3)
2024-11-26T12:53:12.3209476+01:00 0HN8E23FBMQMN:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:53:12.3221275+01:00 0HN8E23FBMQMN:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:12.3222585+01:00 0HN8E23FBMQMN:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:12.3268826+01:00 0HN8E23FBMQMN:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:53:12.3287253+01:00 0HN8E23FBMQMN:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:53:12.3370192+01:00 0HN8E23FBMQMN:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 8.4629ms. (f66409e9)
2024-11-26T12:53:12.3380352+01:00 0HN8E23FBMQMN:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 15.706ms (afa2e885)
2024-11-26T12:53:12.3381132+01:00 0HN8E23FBMQMN:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:12.3381976+01:00 0HN8E23FBMQMN:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:12.3382452+01:00 0HN8E23FBMQMN:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:12.3383917+01:00 0HN8E23FBMQMN:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 17.6239ms (74253ad3)
2024-11-26T12:53:13.8347912+01:00 0HN8E23FBMQMN:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:53:13.8370245+01:00 0HN8E23FBMQMN:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:13.8371397+01:00 0HN8E23FBMQMN:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:13.8399207+01:00 0HN8E23FBMQMN:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:53:13.8402418+01:00 0HN8E23FBMQMN:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:53:13.8411654+01:00 0HN8E23FBMQMN:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 0.9475ms. (f66409e9)
2024-11-26T12:53:13.8412427+01:00 0HN8E23FBMQMN:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 4.0538ms (afa2e885)
2024-11-26T12:53:13.8412794+01:00 0HN8E23FBMQMN:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:13.8413410+01:00 0HN8E23FBMQMN:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:13.8413823+01:00 0HN8E23FBMQMN:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:13.8415552+01:00 0HN8E23FBMQMN:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 6.9953ms (74253ad3)
2024-11-26T12:53:16.3094283+01:00 0HN8E23FBMQMN:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 315 (d509f86a)
2024-11-26T12:53:16.3111081+01:00 0HN8E23FBMQMN:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:16.3112921+01:00 0HN8E23FBMQMN:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:16.3149422+01:00 0HN8E23FBMQMN:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:53:16.3170730+01:00 0HN8E23FBMQMN:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:53:16.3218925+01:00 0HN8E23FBMQMN:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);" (0723d8ff)
2024-11-26T12:53:16.3235013+01:00 0HN8E23FBMQMN:0000001B [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:53:16.3236179+01:00 0HN8E23FBMQMN:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 12.2549ms (afa2e885)
2024-11-26T12:53:16.3236473+01:00 0HN8E23FBMQMN:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:16.3238565+01:00 0HN8E23FBMQMN:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 14.4738ms (74253ad3)
2024-11-26T12:53:16.3264689+01:00 0HN8E23FBMQMN:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:53:16.3276699+01:00 0HN8E23FBMQMN:0000001D [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:16.3277367+01:00 0HN8E23FBMQMN:0000001D [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:16.3304623+01:00 0HN8E23FBMQMN:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:53:16.3334974+01:00 0HN8E23FBMQMN:0000001D [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:53:16.3351747+01:00 0HN8E23FBMQMN:0000001D [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.6671ms. (f66409e9)
2024-11-26T12:53:16.3374785+01:00 0HN8E23FBMQMN:0000001D [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 9.7004ms (afa2e885)
2024-11-26T12:53:16.3375213+01:00 0HN8E23FBMQMN:0000001D [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:16.3375894+01:00 0HN8E23FBMQMN:0000001D [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:16.3376139+01:00 0HN8E23FBMQMN:0000001D [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:16.3377639+01:00 0HN8E23FBMQMN:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 11.4257ms (74253ad3)
2024-11-26T12:53:36.3018417+01:00 0HN8E23FBMQMN:0000001F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:53:36.3057262+01:00 0HN8E23FBMQMN:0000001F [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:36.3058589+01:00 0HN8E23FBMQMN:0000001F [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:36.3110548+01:00 0HN8E23FBMQMN:0000001F [INF] Executed DbCommand ("3"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:53:36.3114090+01:00 0HN8E23FBMQMN:0000001F [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:53:36.3117492+01:00 0HN8E23FBMQMN:0000001F [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.3868ms. (f66409e9)
2024-11-26T12:53:36.3118149+01:00 0HN8E23FBMQMN:0000001F [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 5.9164ms (afa2e885)
2024-11-26T12:53:36.3118462+01:00 0HN8E23FBMQMN:0000001F [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:36.3119075+01:00 0HN8E23FBMQMN:0000001F [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:36.3119347+01:00 0HN8E23FBMQMN:0000001F [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:36.3120555+01:00 0HN8E23FBMQMN:0000001F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 10.2785ms (74253ad3)
2024-11-26T12:53:37.7741810+01:00 0HN8E23FBMQMN:00000021 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:53:37.7756544+01:00 0HN8E23FBMQMN:00000021 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:37.7757516+01:00 0HN8E23FBMQMN:00000021 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:37.7772358+01:00 0HN8E23FBMQMN:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:53:37.7774585+01:00 0HN8E23FBMQMN:00000021 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:53:37.7781712+01:00 0HN8E23FBMQMN:00000021 [INF] Executed ViewResult - view "CreateDemande" executed in 0.7261ms. (f66409e9)
2024-11-26T12:53:37.7782296+01:00 0HN8E23FBMQMN:00000021 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 2.3953ms (afa2e885)
2024-11-26T12:53:37.7782639+01:00 0HN8E23FBMQMN:00000021 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:37.7783213+01:00 0HN8E23FBMQMN:00000021 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:37.7783749+01:00 0HN8E23FBMQMN:00000021 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:37.7785702+01:00 0HN8E23FBMQMN:00000021 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 4.4696ms (74253ad3)
2024-11-26T12:53:40.6258675+01:00 0HN8E23FBMQMN:00000023 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 314 (d509f86a)
2024-11-26T12:53:40.6280311+01:00 0HN8E23FBMQMN:00000023 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:40.6281731+01:00 0HN8E23FBMQMN:00000023 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:40.6391304+01:00 0HN8E23FBMQMN:00000023 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [p].[Id], [p].[Name]
FROM [Produits] AS [p]" (0723d8ff)
2024-11-26T12:53:40.6396374+01:00 0HN8E23FBMQMN:00000023 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:53:40.6410882+01:00 0HN8E23FBMQMN:00000023 [INF] Executed ViewResult - view "CreateDemande" executed in 1.4742ms. (f66409e9)
2024-11-26T12:53:40.6411524+01:00 0HN8E23FBMQMN:00000023 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 12.9063ms (afa2e885)
2024-11-26T12:53:40.6411952+01:00 0HN8E23FBMQMN:00000023 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:40.6412583+01:00 0HN8E23FBMQMN:00000023 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:40.6412882+01:00 0HN8E23FBMQMN:00000023 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:40.6414214+01:00 0HN8E23FBMQMN:00000023 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 15.6414ms (74253ad3)
2024-11-26T12:53:47.9988474+01:00 0HN8E23FBMQMN:00000025 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:53:48.0014397+01:00 0HN8E23FBMQMN:00000025 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:48.0015669+01:00 0HN8E23FBMQMN:00000025 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:48.0166509+01:00 0HN8E23FBMQMN:00000025 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:53:48.0174629+01:00 0HN8E23FBMQMN:00000025 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:53:48.0177533+01:00 0HN8E23FBMQMN:00000025 [INF] Executed ViewResult - view "CreateDemande" executed in 0.4809ms. (f66409e9)
2024-11-26T12:53:48.0178910+01:00 0HN8E23FBMQMN:00000025 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 16.2627ms (afa2e885)
2024-11-26T12:53:48.0179198+01:00 0HN8E23FBMQMN:00000025 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:48.0179652+01:00 0HN8E23FBMQMN:00000025 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:48.0180027+01:00 0HN8E23FBMQMN:00000025 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:48.0181248+01:00 0HN8E23FBMQMN:00000025 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 19.7314ms (74253ad3)
2024-11-26T12:53:56.8056597+01:00 0HN8E23FBMQMN:00000027 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 315 (d509f86a)
2024-11-26T12:53:56.8073570+01:00 0HN8E23FBMQMN:00000027 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:56.8074565+01:00 0HN8E23FBMQMN:00000027 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:56.8163558+01:00 0HN8E23FBMQMN:00000027 [INF] Executed DbCommand ("7"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:53:56.8188341+01:00 0HN8E23FBMQMN:00000027 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:53:56.8282311+01:00 0HN8E23FBMQMN:00000027 [INF] Executed DbCommand ("8"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);" (0723d8ff)
2024-11-26T12:53:56.8289945+01:00 0HN8E23FBMQMN:00000027 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:53:56.8290588+01:00 0HN8E23FBMQMN:00000027 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 21.5637ms (afa2e885)
2024-11-26T12:53:56.8290748+01:00 0HN8E23FBMQMN:00000027 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:56.8292178+01:00 0HN8E23FBMQMN:00000027 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 23.7125ms (74253ad3)
2024-11-26T12:53:56.8322475+01:00 0HN8E23FBMQMN:00000029 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:53:56.8337491+01:00 0HN8E23FBMQMN:00000029 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:53:56.8338707+01:00 0HN8E23FBMQMN:00000029 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:53:56.8514775+01:00 0HN8E23FBMQMN:00000029 [INF] Executed DbCommand ("16"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:53:56.8522310+01:00 0HN8E23FBMQMN:00000029 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:53:56.8524290+01:00 0HN8E23FBMQMN:00000029 [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.2234ms. (f66409e9)
2024-11-26T12:53:56.8524641+01:00 0HN8E23FBMQMN:00000029 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 18.5631ms (afa2e885)
2024-11-26T12:53:56.8524822+01:00 0HN8E23FBMQMN:00000029 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:53:56.8525242+01:00 0HN8E23FBMQMN:00000029 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:53:56.8525375+01:00 0HN8E23FBMQMN:00000029 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:53:56.8526072+01:00 0HN8E23FBMQMN:00000029 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 20.568ms (74253ad3)
2024-11-26T12:54:02.8023137+01:00 0HN8E23FBMQMN:0000002B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T12:54:02.8048985+01:00 0HN8E23FBMQMN:0000002B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:54:02.8050578+01:00 0HN8E23FBMQMN:0000002B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:54:02.8075046+01:00 0HN8E23FBMQMN:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T12:54:02.8081426+01:00 0HN8E23FBMQMN:0000002B [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T12:54:02.8086214+01:00 0HN8E23FBMQMN:0000002B [INF] Executed ViewResult - view "CreateDemande" executed in 0.7462ms. (f66409e9)
2024-11-26T12:54:02.8087029+01:00 0HN8E23FBMQMN:0000002B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 3.5858ms (afa2e885)
2024-11-26T12:54:02.8088358+01:00 0HN8E23FBMQMN:0000002B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:54:02.8089921+01:00 0HN8E23FBMQMN:0000002B [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:54:02.8090428+01:00 0HN8E23FBMQMN:0000002B [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:54:02.8092636+01:00 0HN8E23FBMQMN:0000002B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 6.9691ms (74253ad3)
2024-11-26T12:54:12.1978110+01:00 0HN8E23FBMQMN:0000002D [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 326 (d509f86a)
2024-11-26T12:54:12.1990620+01:00 0HN8E23FBMQMN:0000002D [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T12:54:12.1991500+01:00 0HN8E23FBMQMN:0000002D [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:54:12.2021959+01:00 0HN8E23FBMQMN:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T12:54:12.2051027+01:00 0HN8E23FBMQMN:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T12:54:12.2173236+01:00 0HN8E23FBMQMN:0000002D [INF] Executed DbCommand ("11"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (Size = 4000), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);" (0723d8ff)
2024-11-26T12:54:12.2179418+01:00 0HN8E23FBMQMN:0000002D [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T12:54:12.2180036+01:00 0HN8E23FBMQMN:0000002D [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 18.8131ms (afa2e885)
2024-11-26T12:54:12.2180196+01:00 0HN8E23FBMQMN:0000002D [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T12:54:12.2181209+01:00 0HN8E23FBMQMN:0000002D [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 20.5332ms (74253ad3)
2024-11-26T12:54:12.2208217+01:00 0HN8E23FBMQMN:0000002F [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T12:54:12.2223943+01:00 0HN8E23FBMQMN:0000002F [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T12:54:12.2225188+01:00 0HN8E23FBMQMN:0000002F [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T12:54:12.2255471+01:00 0HN8E23FBMQMN:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T12:54:12.2265285+01:00 0HN8E23FBMQMN:0000002F [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T12:54:12.2268541+01:00 0HN8E23FBMQMN:0000002F [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.3622ms. (f66409e9)
2024-11-26T12:54:12.2269265+01:00 0HN8E23FBMQMN:0000002F [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 4.3677ms (afa2e885)
2024-11-26T12:54:12.2269673+01:00 0HN8E23FBMQMN:0000002F [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T12:54:12.2270496+01:00 0HN8E23FBMQMN:0000002F [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T12:54:12.2270770+01:00 0HN8E23FBMQMN:0000002F [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T12:54:12.2272566+01:00 0HN8E23FBMQMN:0000002F [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 6.422ms (74253ad3)
2024-11-26T13:07:37.5906579+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T13:07:37.7514228+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T13:07:37.7515143+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T13:07:37.7769544+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T13:07:37.7772461+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T13:07:37.7772728+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T13:07:38.2415578+01:00 0HN8E2BLO4REN:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T13:07:38.3494215+01:00 0HN8E2BLO4REN:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 111.4926ms (74253ad3)
2024-11-26T13:07:38.3511802+01:00 0HN8E2BLO4REN:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T13:07:45.4309867+01:00 0HN8E2BLO4REN:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T13:07:45.4392675+01:00 0HN8E2BLO4REN:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T13:07:45.4479591+01:00 0HN8E2BLO4REN:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:07:45.5518948+01:00 0HN8E2BLO4REN:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T13:07:45.5734663+01:00 0HN8E2BLO4REN:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 22.0224ms. (f66409e9)
2024-11-26T13:07:45.5740184+01:00 0HN8E2BLO4REN:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 125.7233ms (afa2e885)
2024-11-26T13:07:45.5740931+01:00 0HN8E2BLO4REN:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T13:07:45.5762929+01:00 0HN8E2BLO4REN:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 145.3865ms (74253ad3)
2024-11-26T13:07:45.6071356+01:00 0HN8E2BLO4REN:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T13:07:45.6073868+01:00 0HN8E2BLO4REN:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T13:07:45.6220323+01:00 0HN8E2BLO4REN:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 14.9975ms (74253ad3)
2024-11-26T13:07:45.6385676+01:00 0HN8E2BLO4REN:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 31.405ms (74253ad3)
2024-11-26T13:07:46.7734372+01:00 0HN8E2BLO4REN:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T13:07:46.7878262+01:00 0HN8E2BLO4REN:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T13:07:46.7903628+01:00 0HN8E2BLO4REN:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:07:46.7975776+01:00 0HN8E2BLO4REN:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T13:07:46.8070436+01:00 0HN8E2BLO4REN:00000009 [INF] Executed ViewResult - view "Login" executed in 10.118ms. (f66409e9)
2024-11-26T13:07:46.8072489+01:00 0HN8E2BLO4REN:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 16.7811ms (afa2e885)
2024-11-26T13:07:46.8073129+01:00 0HN8E2BLO4REN:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T13:07:46.8074915+01:00 0HN8E2BLO4REN:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 35.1439ms (74253ad3)
2024-11-26T13:07:46.8315828+01:00 0HN8E2BLO4REN:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T13:07:46.8324084+01:00 0HN8E2BLO4REN:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T13:07:46.8328185+01:00 0HN8E2BLO4REN:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.4484ms (74253ad3)
2024-11-26T13:07:46.8454800+01:00 0HN8E2BLO4REN:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 13.4146ms (74253ad3)
2024-11-26T13:07:48.3475324+01:00 0HN8E2BLO4REN:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T13:07:48.3616074+01:00 0HN8E2BLO4REN:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T13:07:48.3759384+01:00 0HN8E2BLO4REN:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:07:49.1123972+01:00 0HN8E2BLO4REN:0000000F [INF] Executed DbCommand ("31"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T13:07:49.1757868+01:00 0HN8E2BLO4REN:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T13:07:49.1791157+01:00 0HN8E2BLO4REN:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T13:07:49.1876316+01:00 0HN8E2BLO4REN:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T13:07:49.1881042+01:00 0HN8E2BLO4REN:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 812.1001ms (afa2e885)
2024-11-26T13:07:49.1882699+01:00 0HN8E2BLO4REN:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T13:07:49.1914686+01:00 0HN8E2BLO4REN:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 844.8695ms (74253ad3)
2024-11-26T13:07:49.1919311+01:00 0HN8E2BLO4REN:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T13:07:49.1958764+01:00 0HN8E2BLO4REN:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T13:07:49.1979160+01:00 0HN8E2BLO4REN:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:07:49.2751911+01:00 0HN8E2BLO4REN:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T13:07:49.2986653+01:00 0HN8E2BLO4REN:00000011 [INF] Executed DbCommand ("13"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T13:07:49.3000883+01:00 0HN8E2BLO4REN:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T13:07:49.3032044+01:00 0HN8E2BLO4REN:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.4716ms. (f66409e9)
2024-11-26T13:07:49.3032903+01:00 0HN8E2BLO4REN:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 105.3247ms (afa2e885)
2024-11-26T13:07:49.3033160+01:00 0HN8E2BLO4REN:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T13:07:49.3036649+01:00 0HN8E2BLO4REN:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:07:49.3038225+01:00 0HN8E2BLO4REN:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:07:49.3039888+01:00 0HN8E2BLO4REN:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 112.0822ms (74253ad3)
2024-11-26T13:07:54.0890617+01:00 0HN8E2BLO4REN:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T13:07:54.0940234+01:00 0HN8E2BLO4REN:00000013 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T13:07:54.0955438+01:00 0HN8E2BLO4REN:00000013 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:07:54.1408078+01:00 0HN8E2BLO4REN:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T13:07:54.1430207+01:00 0HN8E2BLO4REN:00000013 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T13:07:54.1475987+01:00 0HN8E2BLO4REN:00000013 [INF] Executed ViewResult - view "CreateDemande" executed in 5.136ms. (f66409e9)
2024-11-26T13:07:54.1476777+01:00 0HN8E2BLO4REN:00000013 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 52.0866ms (afa2e885)
2024-11-26T13:07:54.1476997+01:00 0HN8E2BLO4REN:00000013 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T13:07:54.1477488+01:00 0HN8E2BLO4REN:00000013 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:07:54.1477694+01:00 0HN8E2BLO4REN:00000013 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:07:54.1478844+01:00 0HN8E2BLO4REN:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 59.0491ms (74253ad3)
2024-11-26T13:08:02.1003956+01:00 0HN8E2BLO4REN:00000015 [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 421 (d509f86a)
2024-11-26T13:08:02.1031820+01:00 0HN8E2BLO4REN:00000015 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T13:08:02.1087145+01:00 0HN8E2BLO4REN:00000015 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:08:02.1385475+01:00 0HN8E2BLO4REN:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__currentYear_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Demandes] AS [d]
WHERE [d].[CreatedDate] IS NOT NULL AND DATEPART(year, [d].[CreatedDate]) = @__currentYear_0" (0723d8ff)
2024-11-26T13:08:02.1469099+01:00 0HN8E2BLO4REN:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[StatusName]
FROM [StatusDemandes] AS [s]
WHERE [s].[StatusName] = N'En cours de traitement'" (0723d8ff)
2024-11-26T13:08:02.2767205+01:00 0HN8E2BLO4REN:00000015 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Guid), @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (Size = 4000), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Boolean), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Guid), @p27='?' (DbType = Int32), @p28='?' (DbType = Guid), @p29='?' (Size = 4000), @p30='?' (DbType = DateTime2), @p31='?' (DbType = Guid), @p32='?' (DbType = Boolean), @p33='?' (Size = 4000), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Demandes] ([Id], [CreatedBy], [CreatedDate], [DemandeNumber], [IsDeleted], [ModifiedBy], [ModifiedDate], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO [DemandeProduits] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [Livré], [ModifiedBy], [ModifiedDate], [ProduitId], [Quantité])
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO [HistoriqueStatusDemandes] ([Id], [CreatedBy], [CreatedDate], [DemandeId], [IsDeleted], [ModifiedBy], [ModifiedDate], [StatusDemandeId])
VALUES (@p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);" (0723d8ff)
2024-11-26T13:08:02.2889458+01:00 0HN8E2BLO4REN:00000015 [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T13:08:02.2890418+01:00 0HN8E2BLO4REN:00000015 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 180.2638ms (afa2e885)
2024-11-26T13:08:02.2890611+01:00 0HN8E2BLO4REN:00000015 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T13:08:02.2891834+01:00 0HN8E2BLO4REN:00000015 [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 302 0 null 189.0274ms (74253ad3)
2024-11-26T13:08:02.2922115+01:00 0HN8E2BLO4REN:00000017 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T13:08:02.2935395+01:00 0HN8E2BLO4REN:00000017 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T13:08:02.2936969+01:00 0HN8E2BLO4REN:00000017 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:08:02.3080115+01:00 0HN8E2BLO4REN:00000017 [INF] Executed DbCommand ("11"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T13:08:02.3577306+01:00 0HN8E2BLO4REN:00000017 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T13:08:02.3587760+01:00 0HN8E2BLO4REN:00000017 [INF] Executed ViewResult - view "DemandesListRequester" executed in 1.1781ms. (f66409e9)
2024-11-26T13:08:02.3588319+01:00 0HN8E2BLO4REN:00000017 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 65.098ms (afa2e885)
2024-11-26T13:08:02.3588638+01:00 0HN8E2BLO4REN:00000017 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T13:08:02.3589441+01:00 0HN8E2BLO4REN:00000017 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:08:02.3589906+01:00 0HN8E2BLO4REN:00000017 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:08:02.3591286+01:00 0HN8E2BLO4REN:00000017 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 67.0714ms (74253ad3)
2024-11-26T13:08:13.1178364+01:00 0HN8E2BLO4REN:00000019 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - null null (d509f86a)
2024-11-26T13:08:13.1202658+01:00 0HN8E2BLO4REN:00000019 [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T13:08:13.1204031+01:00 0HN8E2BLO4REN:00000019 [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult CreateDemande()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:08:13.1261616+01:00 0HN8E2BLO4REN:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[Name]
FROM (
    SELECT DISTINCT [p].[Id], [p].[CreatedBy], [p].[CreatedDate], [p].[IsDeleted], [p].[ModifiedBy], [p].[ModifiedDate], [p].[Name]
    FROM [Produits] AS [p]
) AS [t]" (0723d8ff)
2024-11-26T13:08:13.1269840+01:00 0HN8E2BLO4REN:00000019 [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T13:08:13.1281450+01:00 0HN8E2BLO4REN:00000019 [INF] Executed ViewResult - view "CreateDemande" executed in 1.2944ms. (f66409e9)
2024-11-26T13:08:13.1283105+01:00 0HN8E2BLO4REN:00000019 [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 7.8372ms (afa2e885)
2024-11-26T13:08:13.1283817+01:00 0HN8E2BLO4REN:00000019 [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T13:08:13.1285703+01:00 0HN8E2BLO4REN:00000019 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:08:13.1286813+01:00 0HN8E2BLO4REN:00000019 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:08:13.1293242+01:00 0HN8E2BLO4REN:00000019 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 11.4303ms (74253ad3)
2024-11-26T13:08:14.8978846+01:00 0HN8E2BLO4REN:0000001B [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - "application/x-www-form-urlencoded" 419 (d509f86a)
2024-11-26T13:08:14.8996707+01:00 0HN8E2BLO4REN:0000001B [INF] Executing endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (500cc934)
2024-11-26T13:08:14.8998270+01:00 0HN8E2BLO4REN:0000001B [INF] Route matched with "{action = \"CreateDemande\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDemande(StockManagement.Application.Features.Demandes.DTOs.CreateDemandeDTO)" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:08:14.9062732+01:00 0HN8E2BLO4REN:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [p].[Id], [p].[Name]
FROM [Produits] AS [p]" (0723d8ff)
2024-11-26T13:08:14.9067551+01:00 0HN8E2BLO4REN:0000001B [INF] Executing ViewResult, running view "CreateDemande". (c83d0e25)
2024-11-26T13:08:14.9080632+01:00 0HN8E2BLO4REN:0000001B [INF] Executed ViewResult - view "CreateDemande" executed in 1.3532ms. (f66409e9)
2024-11-26T13:08:14.9081003+01:00 0HN8E2BLO4REN:0000001B [INF] Executed action "DemandesController.CreateDemande (StockManagement.Web)" in 8.2436ms (afa2e885)
2024-11-26T13:08:14.9081179+01:00 0HN8E2BLO4REN:0000001B [INF] Executed endpoint '"DemandesController.CreateDemande (StockManagement.Web)"' (99874f2b)
2024-11-26T13:08:14.9081612+01:00 0HN8E2BLO4REN:0000001B [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:08:14.9081747+01:00 0HN8E2BLO4REN:0000001B [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:08:14.9082564+01:00 0HN8E2BLO4REN:0000001B [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Demandes/CreateDemande""" - 200 null "text/html; charset=utf-8" 10.6366ms (74253ad3)
2024-11-26T13:08:18.1980710+01:00 0HN8E2BLO4REN:0000001D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T13:08:18.1995581+01:00 0HN8E2BLO4REN:0000001D [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T13:08:18.1996611+01:00 0HN8E2BLO4REN:0000001D [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T13:08:18.2032926+01:00 0HN8E2BLO4REN:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T13:08:18.2046967+01:00 0HN8E2BLO4REN:0000001D [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T13:08:18.2053783+01:00 0HN8E2BLO4REN:0000001D [INF] Executed ViewResult - view "DemandesListRequester" executed in 0.7161ms. (f66409e9)
2024-11-26T13:08:18.2054531+01:00 0HN8E2BLO4REN:0000001D [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 5.7466ms (afa2e885)
2024-11-26T13:08:18.2054894+01:00 0HN8E2BLO4REN:0000001D [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T13:08:18.2055505+01:00 0HN8E2BLO4REN:0000001D [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T13:08:18.2055814+01:00 0HN8E2BLO4REN:0000001D [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T13:08:18.2057799+01:00 0HN8E2BLO4REN:0000001D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 7.914ms (74253ad3)
2024-11-26T15:29:40.9869834+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T15:29:41.1931977+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T15:29:41.1933325+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T15:29:41.2248073+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T15:29:41.2252721+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T15:29:41.2253328+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T15:29:41.4029016+01:00 0HN8E4R1ROBR8:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T15:29:41.5286766+01:00 0HN8E4R1ROBR8:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 129.0119ms (74253ad3)
2024-11-26T15:29:41.5296403+01:00 0HN8E4R1ROBR8:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T15:29:43.8596321+01:00 0HN8E4R1ROBR8:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T15:29:43.8671921+01:00 0HN8E4R1ROBR8:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T15:29:43.8781164+01:00 0HN8E4R1ROBR8:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:29:43.9860843+01:00 0HN8E4R1ROBR8:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T15:29:44.0071726+01:00 0HN8E4R1ROBR8:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 21.9718ms. (f66409e9)
2024-11-26T15:29:44.0077743+01:00 0HN8E4R1ROBR8:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 129.2489ms (afa2e885)
2024-11-26T15:29:44.0078566+01:00 0HN8E4R1ROBR8:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T15:29:44.0105818+01:00 0HN8E4R1ROBR8:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 151.1023ms (74253ad3)
2024-11-26T15:29:44.0425526+01:00 0HN8E4R1ROBR8:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T15:29:44.0425741+01:00 0HN8E4R1ROBR8:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T15:29:44.0551174+01:00 0HN8E4R1ROBR8:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 13.4003ms (74253ad3)
2024-11-26T15:29:44.0763270+01:00 0HN8E4R1ROBR8:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 34.0362ms (74253ad3)
2024-11-26T15:29:45.3231626+01:00 0HN8E4R1ROBR8:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T15:29:45.3297431+01:00 0HN8E4R1ROBR8:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T15:29:45.3314056+01:00 0HN8E4R1ROBR8:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:29:45.3380010+01:00 0HN8E4R1ROBR8:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T15:29:45.3442800+01:00 0HN8E4R1ROBR8:00000009 [INF] Executed ViewResult - view "Login" executed in 6.8333ms. (f66409e9)
2024-11-26T15:29:45.3444430+01:00 0HN8E4R1ROBR8:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 12.9516ms (afa2e885)
2024-11-26T15:29:45.3444760+01:00 0HN8E4R1ROBR8:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T15:29:45.3445997+01:00 0HN8E4R1ROBR8:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 21.788ms (74253ad3)
2024-11-26T15:29:45.3680654+01:00 0HN8E4R1ROBR8:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T15:29:45.3690411+01:00 0HN8E4R1ROBR8:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.2251ms (74253ad3)
2024-11-26T15:29:45.3720184+01:00 0HN8E4R1ROBR8:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T15:29:45.3901846+01:00 0HN8E4R1ROBR8:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 18.1579ms (74253ad3)
2024-11-26T15:29:46.3756794+01:00 0HN8E4R1ROBR8:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T15:29:46.3794526+01:00 0HN8E4R1ROBR8:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T15:29:46.3915699+01:00 0HN8E4R1ROBR8:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:29:47.2506889+01:00 0HN8E4R1ROBR8:0000000F [INF] Executed DbCommand ("39"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T15:29:47.3117839+01:00 0HN8E4R1ROBR8:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T15:29:47.3150703+01:00 0HN8E4R1ROBR8:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T15:29:47.3236256+01:00 0HN8E4R1ROBR8:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T15:29:47.3241832+01:00 0HN8E4R1ROBR8:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 932.578ms (afa2e885)
2024-11-26T15:29:47.3243375+01:00 0HN8E4R1ROBR8:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T15:29:47.3288107+01:00 0HN8E4R1ROBR8:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T15:29:47.3288756+01:00 0HN8E4R1ROBR8:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 953.285ms (74253ad3)
2024-11-26T15:29:47.3359648+01:00 0HN8E4R1ROBR8:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T15:29:47.3395298+01:00 0HN8E4R1ROBR8:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:29:47.4307498+01:00 0HN8E4R1ROBR8:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T15:29:47.4769244+01:00 0HN8E4R1ROBR8:00000011 [INF] Executed DbCommand ("34"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T15:29:47.5676943+01:00 0HN8E4R1ROBR8:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T15:29:47.5708115+01:00 0HN8E4R1ROBR8:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.3325ms. (f66409e9)
2024-11-26T15:29:47.5708959+01:00 0HN8E4R1ROBR8:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 231.3076ms (afa2e885)
2024-11-26T15:29:47.5709274+01:00 0HN8E4R1ROBR8:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T15:29:47.5713122+01:00 0HN8E4R1ROBR8:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T15:29:47.5714919+01:00 0HN8E4R1ROBR8:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T15:29:47.5716906+01:00 0HN8E4R1ROBR8:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 243.0134ms (74253ad3)
2024-11-26T15:29:52.1162447+01:00 0HN8E4R1ROBR8:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/export""" - null null (d509f86a)
2024-11-26T15:29:52.1226524+01:00 0HN8E4R1ROBR8:00000013 [INF] Executing endpoint '"DemandesController.Export (StockManagement.Web)"' (500cc934)
2024-11-26T15:29:52.1281862+01:00 0HN8E4R1ROBR8:00000013 [INF] Route matched with "{action = \"Export\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Export()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:29:52.1991099+01:00 0HN8E4R1ROBR8:00000013 [INF] Executed DbCommand ("27"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T15:29:52.5256977+01:00 0HN8E4R1ROBR8:00000013 [INF] Executing "FileContentResult", sending file with download name '"Demandes.xlsx"' ... (3ade02d2)
2024-11-26T15:29:52.5291442+01:00 0HN8E4R1ROBR8:00000013 [INF] Executed action "DemandesController.Export (StockManagement.Web)" in 400.8678ms (afa2e885)
2024-11-26T15:29:52.5291903+01:00 0HN8E4R1ROBR8:00000013 [INF] Executed endpoint '"DemandesController.Export (StockManagement.Web)"' (99874f2b)
2024-11-26T15:29:52.5293396+01:00 0HN8E4R1ROBR8:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/export""" - 200 2849 "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 413.4003ms (74253ad3)
2024-11-26T15:35:50.0465651+01:00  [INF] User profile is available. Using '"C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2024-11-26T15:35:50.2377994+01:00  [INF] Now listening on: "https://localhost:7025" (d826f4b8)
2024-11-26T15:35:50.2380225+01:00  [INF] Now listening on: "http://localhost:5222" (d826f4b8)
2024-11-26T15:35:50.2694274+01:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2024-11-26T15:35:50.2698579+01:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2024-11-26T15:35:50.2699031+01:00  [INF] Content root path: "C:\Users\LENOVO\Desktop\Project\EmployeeManagement.Web" (cc26f24e)
2024-11-26T15:35:50.5955147+01:00 0HN8E4UFS5BTO:00000001 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - null null (d509f86a)
2024-11-26T15:35:50.7429960+01:00 0HN8E4UFS5BTO:00000001 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/index.html""" - 404 0 null 151.5203ms (74253ad3)
2024-11-26T15:35:50.7440231+01:00 0HN8E4UFS5BTO:00000001 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "https"://"localhost:7025""""/index.html", Response status code: 404 (e353595a)
2024-11-26T15:35:54.5487376+01:00 0HN8E4UFS5BTO:00000003 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - null null (d509f86a)
2024-11-26T15:35:54.5565997+01:00 0HN8E4UFS5BTO:00000003 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (500cc934)
2024-11-26T15:35:54.5735633+01:00 0HN8E4UFS5BTO:00000003 [INF] Route matched with "{action = \"Acceuil\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Acceuil()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:35:54.6836417+01:00 0HN8E4UFS5BTO:00000003 [INF] Executing ViewResult, running view "Acceuil". (c83d0e25)
2024-11-26T15:35:54.7093617+01:00 0HN8E4UFS5BTO:00000003 [INF] Executed ViewResult - view "Acceuil" executed in 24.7191ms. (f66409e9)
2024-11-26T15:35:54.7099740+01:00 0HN8E4UFS5BTO:00000003 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)" in 135.8505ms (afa2e885)
2024-11-26T15:35:54.7100531+01:00 0HN8E4UFS5BTO:00000003 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Acceuil (StockManagement.Web)"' (99874f2b)
2024-11-26T15:35:54.7122414+01:00 0HN8E4UFS5BTO:00000003 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees""" - 200 null "text/html; charset=utf-8" 163.6182ms (74253ad3)
2024-11-26T15:35:54.7562994+01:00 0HN8E4UFS5BTO:00000005 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T15:35:54.7612919+01:00 0HN8E4UFS5BTO:00000007 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T15:35:54.7671834+01:00 0HN8E4UFS5BTO:00000005 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 10.914ms (74253ad3)
2024-11-26T15:35:54.8031416+01:00 0HN8E4UFS5BTO:00000007 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 42.1089ms (74253ad3)
2024-11-26T15:35:55.9598691+01:00 0HN8E4UFS5BTO:00000009 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - null null (d509f86a)
2024-11-26T15:35:55.9661791+01:00 0HN8E4UFS5BTO:00000009 [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T15:35:55.9697059+01:00 0HN8E4UFS5BTO:00000009 [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Login()" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:35:55.9771960+01:00 0HN8E4UFS5BTO:00000009 [INF] Executing ViewResult, running view "Login". (c83d0e25)
2024-11-26T15:35:55.9827414+01:00 0HN8E4UFS5BTO:00000009 [INF] Executed ViewResult - view "Login" executed in 6.0022ms. (f66409e9)
2024-11-26T15:35:55.9828931+01:00 0HN8E4UFS5BTO:00000009 [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 13.108ms (afa2e885)
2024-11-26T15:35:55.9829276+01:00 0HN8E4UFS5BTO:00000009 [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T15:35:55.9830473+01:00 0HN8E4UFS5BTO:00000009 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Employees/Login""" - 200 null "text/html; charset=utf-8" 23.8164ms (74253ad3)
2024-11-26T15:35:56.0117429+01:00 0HN8E4UFS5BTO:0000000B [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - null null (d509f86a)
2024-11-26T15:35:56.0128619+01:00 0HN8E4UFS5BTO:0000000B [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_framework/aspnetcore-browser-refresh.js""" - 200 13774 "application/javascript; charset=utf-8" 1.3696ms (74253ad3)
2024-11-26T15:35:56.0134714+01:00 0HN8E4UFS5BTO:0000000D [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - null null (d509f86a)
2024-11-26T15:35:56.0303968+01:00 0HN8E4UFS5BTO:0000000D [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/_vs/browserLink""" - 200 null "text/javascript; charset=UTF-8" 17.0694ms (74253ad3)
2024-11-26T15:35:56.8786081+01:00 0HN8E4UFS5BTO:0000000F [INF] Request starting "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - "application/x-www-form-urlencoded" 31 (d509f86a)
2024-11-26T15:35:56.8823492+01:00 0HN8E4UFS5BTO:0000000F [INF] Executing endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (500cc934)
2024-11-26T15:35:56.8933995+01:00 0HN8E4UFS5BTO:0000000F [INF] Route matched with "{action = \"Login\", controller = \"Employees\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(StockManagement.Application.Features.Models.Commands.LoginCommand)" on controller "StockManagement.Web.Controllers.EmployeesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:35:57.6936537+01:00 0HN8E4UFS5BTO:0000000F [INF] Executed DbCommand ("37"ms) [Parameters=["@__request_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0" (0723d8ff)
2024-11-26T15:35:57.7573778+01:00 0HN8E4UFS5BTO:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__model_Username_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__model_Username_0" (0723d8ff)
2024-11-26T15:35:57.7610045+01:00 0HN8E4UFS5BTO:0000000F [INF] AuthenticationScheme: "Cookies" signed in. (c66dd7e7)
2024-11-26T15:35:57.7698586+01:00 0HN8E4UFS5BTO:0000000F [INF] Executing RedirectResult, redirecting to "/api/Demandes/GetListDemandesByUserId". (d98d540e)
2024-11-26T15:35:57.7703842+01:00 0HN8E4UFS5BTO:0000000F [INF] Executed action "StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)" in 876.9239ms (afa2e885)
2024-11-26T15:35:57.7705338+01:00 0HN8E4UFS5BTO:0000000F [INF] Executed endpoint '"StockManagement.Web.Controllers.EmployeesController.Login (StockManagement.Web)"' (99874f2b)
2024-11-26T15:35:57.7743434+01:00 0HN8E4UFS5BTO:00000011 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - null null (d509f86a)
2024-11-26T15:35:57.7743842+01:00 0HN8E4UFS5BTO:0000000F [INF] Request finished "HTTP/2" "POST" "https"://"localhost:7025""""/api/Employees/login""" - 302 0 null 895.8222ms (74253ad3)
2024-11-26T15:35:57.7789481+01:00 0HN8E4UFS5BTO:00000011 [INF] Executing endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (500cc934)
2024-11-26T15:35:57.7810161+01:00 0HN8E4UFS5BTO:00000011 [INF] Route matched with "{action = \"GetListDemandesByUserId\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListDemandesByUserId()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:35:57.8632503+01:00 0HN8E4UFS5BTO:00000011 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. (4c53259e)
2024-11-26T15:35:57.8879300+01:00 0HN8E4UFS5BTO:00000011 [INF] Executed DbCommand ("14"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T15:35:57.9758797+01:00 0HN8E4UFS5BTO:00000011 [INF] Executing ViewResult, running view "DemandesListRequester". (c83d0e25)
2024-11-26T15:35:57.9787407+01:00 0HN8E4UFS5BTO:00000011 [INF] Executed ViewResult - view "DemandesListRequester" executed in 3.1117ms. (f66409e9)
2024-11-26T15:35:57.9788265+01:00 0HN8E4UFS5BTO:00000011 [INF] Executed action "DemandesController.GetListDemandesByUserId (StockManagement.Web)" in 197.7677ms (afa2e885)
2024-11-26T15:35:57.9788489+01:00 0HN8E4UFS5BTO:00000011 [INF] Executed endpoint '"DemandesController.GetListDemandesByUserId (StockManagement.Web)"' (99874f2b)
2024-11-26T15:35:57.9791361+01:00 0HN8E4UFS5BTO:00000011 [WRN] Unable to configure Browser Link script injection on the response.  (ece93296)
2024-11-26T15:35:57.9792950+01:00 0HN8E4UFS5BTO:00000011 [WRN] Unable to configure browser refresh script injection on the response. Consider manually adding '<script src="/_framework/aspnetcore-browser-refresh.js"></script>' to the body of the page. (5302a7e1)
2024-11-26T15:35:57.9794297+01:00 0HN8E4UFS5BTO:00000011 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/GetListDemandesByUserId""" - 200 null "text/html; charset=utf-8" 205.1881ms (74253ad3)
2024-11-26T15:36:01.6921508+01:00 0HN8E4UFS5BTO:00000013 [INF] Request starting "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/export""" - null null (d509f86a)
2024-11-26T15:36:01.6948282+01:00 0HN8E4UFS5BTO:00000013 [INF] Executing endpoint '"DemandesController.Export (StockManagement.Web)"' (500cc934)
2024-11-26T15:36:01.6974014+01:00 0HN8E4UFS5BTO:00000013 [INF] Route matched with "{action = \"Export\", controller = \"Demandes\", page = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Export()" on controller "DemandesController" ("StockManagement.Web"). (122b2fdf)
2024-11-26T15:36:01.7349044+01:00 0HN8E4UFS5BTO:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__request_Id_0='?' (DbType = Guid)"], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[CreatedBy], [d].[CreatedDate], [d].[DemandeNumber], [d].[IsDeleted], [d].[ModifiedBy], [d].[ModifiedDate], [d].[UserId], [u].[Id], [u].[CreatedBy], [u].[CreatedDate], [u].[IsDeleted], [u].[ModifiedBy], [u].[ModifiedDate], [u].[PasswordHash], [u].[RoleId], [u].[Username], [u0].[Id], [u0].[CreatedBy], [u0].[CreatedDate], [u0].[Email], [u0].[IsDeleted], [u0].[ModifiedBy], [u0].[ModifiedDate], [u0].[Nom], [u0].[Prenom], [u0].[ServiceId], [u0].[UserId], [s].[Id], [s].[CreatedBy], [s].[CreatedDate], [s].[DivisionId], [s].[IsDeleted], [s].[ModifiedBy], [s].[ModifiedDate], [s].[Name], [d0].[Id], [d0].[CreatedBy], [d0].[CreatedDate], [d0].[DirectionId], [d0].[IsDeleted], [d0].[ModifiedBy], [d0].[ModifiedDate], [d0].[Name], [d1].[Id], [d1].[CreatedBy], [d1].[CreatedDate], [d1].[IsDeleted], [d1].[ModifiedBy], [d1].[ModifiedDate], [d1].[Name], [t0].[Id], [t0].[CreatedBy], [t0].[CreatedDate], [t0].[DemandeId], [t0].[IsDeleted], [t0].[ModifiedBy], [t0].[ModifiedDate], [t0].[StatusDemandeId], [t0].[Id0], [t0].[CreatedBy0], [t0].[CreatedDate0], [t0].[IsDeleted0], [t0].[ModifiedBy0], [t0].[ModifiedDate0], [t0].[StatusName], [t1].[Id], [t1].[CreatedBy], [t1].[CreatedDate], [t1].[DemandeId], [t1].[IsDeleted], [t1].[Livré], [t1].[ModifiedBy], [t1].[ModifiedDate], [t1].[ProduitId], [t1].[Quantité], [t1].[Id0], [t1].[CreatedBy0], [t1].[CreatedDate0], [t1].[IsDeleted0], [t1].[ModifiedBy0], [t1].[ModifiedDate0], [t1].[Name]
FROM [Demandes] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN [UserDetails] AS [u0] ON [u].[Id] = [u0].[UserId]
LEFT JOIN [Services] AS [s] ON [u0].[ServiceId] = [s].[Id]
LEFT JOIN [Divisions] AS [d0] ON [s].[DivisionId] = [d0].[Id]
LEFT JOIN [Directions] AS [d1] ON [d0].[DirectionId] = [d1].[Id]
OUTER APPLY (
    SELECT [t].[Id], [t].[CreatedBy], [t].[CreatedDate], [t].[DemandeId], [t].[IsDeleted], [t].[ModifiedBy], [t].[ModifiedDate], [t].[StatusDemandeId], [s0].[Id] AS [Id0], [s0].[CreatedBy] AS [CreatedBy0], [s0].[CreatedDate] AS [CreatedDate0], [s0].[IsDeleted] AS [IsDeleted0], [s0].[ModifiedBy] AS [ModifiedBy0], [s0].[ModifiedDate] AS [ModifiedDate0], [s0].[StatusName]
    FROM (
        SELECT TOP(1) [h].[Id], [h].[CreatedBy], [h].[CreatedDate], [h].[DemandeId], [h].[IsDeleted], [h].[ModifiedBy], [h].[ModifiedDate], [h].[StatusDemandeId]
        FROM [HistoriqueStatusDemandes] AS [h]
        WHERE [d].[Id] = [h].[DemandeId]
        ORDER BY [h].[CreatedDate] DESC
    ) AS [t]
    INNER JOIN [StatusDemandes] AS [s0] ON [t].[StatusDemandeId] = [s0].[Id]
) AS [t0]
LEFT JOIN (
    SELECT [d2].[Id], [d2].[CreatedBy], [d2].[CreatedDate], [d2].[DemandeId], [d2].[IsDeleted], [d2].[Livré], [d2].[ModifiedBy], [d2].[ModifiedDate], [d2].[ProduitId], [d2].[Quantité], [p].[Id] AS [Id0], [p].[CreatedBy] AS [CreatedBy0], [p].[CreatedDate] AS [CreatedDate0], [p].[IsDeleted] AS [IsDeleted0], [p].[ModifiedBy] AS [ModifiedBy0], [p].[ModifiedDate] AS [ModifiedDate0], [p].[Name]
    FROM [DemandeProduits] AS [d2]
    INNER JOIN [Produits] AS [p] ON [d2].[ProduitId] = [p].[Id]
) AS [t1] ON [d].[Id] = [t1].[DemandeId]
WHERE [d].[UserId] = @__request_Id_0
ORDER BY [d].[Id], [u].[Id], [u0].[Id], [s].[Id], [d0].[Id], [d1].[Id], [t0].[CreatedDate] DESC, [t0].[Id], [t0].[Id0], [t1].[Id]" (0723d8ff)
2024-11-26T15:36:02.2101437+01:00 0HN8E4UFS5BTO:00000013 [INF] Executing "FileContentResult", sending file with download name '"Demandes.xlsx"' ... (3ade02d2)
2024-11-26T15:36:02.2121843+01:00 0HN8E4UFS5BTO:00000013 [INF] Executed action "DemandesController.Export (StockManagement.Web)" in 514.6715ms (afa2e885)
2024-11-26T15:36:02.2122175+01:00 0HN8E4UFS5BTO:00000013 [INF] Executed endpoint '"DemandesController.Export (StockManagement.Web)"' (99874f2b)
2024-11-26T15:36:02.2123302+01:00 0HN8E4UFS5BTO:00000013 [INF] Request finished "HTTP/2" "GET" "https"://"localhost:7025""""/api/Demandes/export""" - 200 3044 "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 520.652ms (74253ad3)
